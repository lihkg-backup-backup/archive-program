{"tid":1765427,"cid":26,"subCid":0,"title":"連登點整到唔同url只係更新右手面個DIV","createTime":"2019-12-02T00:32:56.000Z","updateTime":"2019-12-17T16:15:05.000Z","uid":65030,"like":0,"dislike":6,"uniUserReply":11,"replies":[{"pid":"0e488c9829a72b375c6641b46123f2735e268bfc","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"citedBy":2,"replyTime":"2019-12-02T00:32:56.000Z","msg":"正常個URL唔同左就會成頁refresh,<br />\n但連登個URL唔同左, 只係refresh右手面個div,<br />\n我知連登用react+redux,<br />\n但點做到?"},{"pid":"62d3bfac75cf696ef05aa8c7f126197a9c68f903","tid":1765427,"uid":278232,"like":0,"dislike":0,"score":0,"quote":{"pid":"0e488c9829a72b375c6641b46123f2735e268bfc","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"citedBy":2,"replyTime":"2019-12-02T00:32:56.000Z","msg":"正常個URL唔同左就會成頁refresh,<br />\n但連登個URL唔同左, 只係refresh右手面個div,<br />\n我知連登用react+redux,<br />\n但點做到?"},"citedBy":0,"replyTime":"2019-12-02T00:34:33.000Z","msg":"淨係route個 component"},{"pid":"219850638d701324adbd4c1fe54c3654d613aa5f","tid":1765427,"uid":255967,"like":1,"dislike":0,"score":1,"citedBy":0,"replyTime":"2019-12-02T00:45:27.000Z","msg":"react-router"},{"pid":"d853a6b2f0d856ca40a544f078cda22bd073e1f8","tid":1765427,"uid":262035,"like":14,"dislike":0,"score":14,"citedBy":0,"replyTime":"2019-12-02T00:53:24.000Z","msg":"舊時啲網站行server side rendering<br />\n一改個url 會就會問server 攞新既一頁<br />\n所以會成個網頁reload<br />\n<br />\nReact 行client side rendering<br />\n改左個url 唔係問server 攞新既asset<br />\n而係靠virtual dom 去判斷要re-render 啲咩<br />\n所以可以做到局部既re-rendering"},{"pid":"a2721e23be8604745a011cd85fd5018a086ec288","tid":1765427,"uid":83309,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-12-02T12:22:06.000Z","msg":"搭單問下如果想nginx迫client reload有冇可能<br />\n<br />\n最近起左舊野係經nginx拎條flv stream<br />\n個nginx會比假ip route去唔同stream<br />\napi改backend個db<br />\n每次request就nginx搵真ip proxy_pass出去<br />\n收緊stream果時換stream既話個client唔識自己reload<br />\n用vlc食stream要手動reload先會轉stream<br />\n<br />\nhtml塞左player入div到又試唔到淨係reload個div<br />\n(用緊純JavaScript<br />\nreload div 睇過好似jquery一句reload()搞得掂<br />\n但係最後應該唔會用browser開)"},{"pid":"7044e63d57bed739b1c728d946dee2622ca4ebe5","tid":1765427,"uid":156878,"like":0,"dislike":0,"score":0,"quote":{"pid":"0e488c9829a72b375c6641b46123f2735e268bfc","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"citedBy":2,"replyTime":"2019-12-02T00:32:56.000Z","msg":"正常個URL唔同左就會成頁refresh,<br />\n但連登個URL唔同左, 只係refresh右手面個div,<br />\n我知連登用react+redux,<br />\n但點做到?"},"citedBy":0,"replyTime":"2019-12-02T15:52:52.000Z","msg":"其實係好古老既野來了.<br />\n<br />\n最底層都係改佢innerHTML<br />\n<br />\ndocument.getElementById('abc').innerHTML = '&lt;p&gt;aaa&lt;/p&gt;';<br />\n<br />\n然後上面都搭好多野咁解"},{"pid":"3765c72fe3ca1660ee8066a297e2d73124e5dfca","tid":1765427,"uid":67527,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2019-12-02T20:42:57.000Z","msg":"<pre><code data-type=\"\">window.addEventListener(&quot;beforeunload&quot;, event =&gt; {\n  event.preventDefault()\n  // Chrome requires returnValue to be set.\n  event.returnValue = &quot;&quot;\n})</code></pre><br />\n重點係依到，你係可以用JavaScript capture個beforeunload，browser轉頁前會有個咁嘅event，你capture咗佢，叫佢唔好做嘢，就可以點改url都唔會refresh<br />\n之後講嗰啲咩client side routing嗰啲，全部都只係更加容易管理url同頁面嘅state嘅關係。你可以想像如果喺另一頁轉過嚟，同就咁load同一頁，如果唔同結果會好奇怪，所以先有client side routing嘅存在"},{"pid":"c7d24bda7a0fc9f92f43124f28c2a6da861853db","tid":1765427,"uid":67527,"like":0,"dislike":0,"score":0,"quote":{"pid":"a2721e23be8604745a011cd85fd5018a086ec288","tid":1765427,"uid":83309,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-12-02T12:22:06.000Z","msg":"搭單問下如果想nginx迫client reload有冇可能<br />\n<br />\n最近起左舊野係經nginx拎條flv stream<br />\n個nginx會比假ip route去唔同stream<br />\napi改backend個db<br />\n每次request就nginx搵真ip proxy_pass出去<br />\n收緊stream果時換stream既話個client唔識自己reload<br />\n用vlc食stream要手動reload先會轉stream<br />\n<br />\nhtml塞左player入div到又試唔到淨係reload個div<br />\n(用緊純JavaScript<br />\nreload div 睇過好似jquery一句reload()搞得掂<br />\n但係最後應該唔會用browser開)"},"citedBy":1,"replyTime":"2019-12-02T22:32:55.000Z","msg":"你個stream係一個connection一路去到尾？<br />\nNginx啫係你唔係轉public IP，跟住我估你係用<br />\n<pre><code data-type=\"\">nginx -s reload</code></pre><br />\n去refresh個steam source，但係因為reload係唔會kill剩返嘅connection，只有新connection先會用新config，所以就唔會自動轉。<br />\n如果你要咁dynamic，最好係client直接問server，個source喺邊，之後在client直接load個source，個source邊咗就reload<br />\n如果你一定要過proxy嘅，set個web socket之類notify client reload (任何real time messaging基本上都work)<br />\n如果你係自己寫個app/web app，唔係直接用native player，應該點都有辦法reload<br />\n其實最簡單可能係放晒啲source去client，個selection logic放落client，直接喺client揀，除非你有security concern"},{"pid":"c7d8509fab3b7227d5143de09e1709e7952ca132","tid":1765427,"uid":83309,"like":0,"dislike":0,"score":0,"quote":{"pid":"c7d24bda7a0fc9f92f43124f28c2a6da861853db","tid":1765427,"uid":67527,"like":0,"dislike":0,"score":0,"quote":{"pid":"a2721e23be8604745a011cd85fd5018a086ec288","tid":1765427,"uid":83309,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-12-02T12:22:06.000Z","msg":"搭單問下如果想nginx迫client reload有冇可能<br />\n<br />\n最近起左舊野係經nginx拎條flv stream<br />\n個nginx會比假ip route去唔同stream<br />\napi改backend個db<br />\n每次request就nginx搵真ip proxy_pass出去<br />\n收緊stream果時換stream既話個client唔識自己reload<br />\n用vlc食stream要手動reload先會轉stream<br />\n<br />\nhtml塞左player入div到又試唔到淨係reload個div<br />\n(用緊純JavaScript<br />\nreload div 睇過好似jquery一句reload()搞得掂<br />\n但係最後應該唔會用browser開)"},"citedBy":1,"replyTime":"2019-12-02T22:32:55.000Z","msg":"你個stream係一個connection一路去到尾？<br />\nNginx啫係你唔係轉public IP，跟住我估你係用<br />\n<pre><code data-type=\"\">nginx -s reload</code></pre><br />\n去refresh個steam source，但係因為reload係唔會kill剩返嘅connection，只有新connection先會用新config，所以就唔會自動轉。<br />\n如果你要咁dynamic，最好係client直接問server，個source喺邊，之後在client直接load個source，個source邊咗就reload<br />\n如果你一定要過proxy嘅，set個web socket之類notify client reload (任何real time messaging基本上都work)<br />\n如果你係自己寫個app/web app，唔係直接用native player，應該點都有辦法reload<br />\n其實最簡單可能係放晒啲source去client，個selection logic放落client，直接喺client揀，除非你有security concern"},"citedBy":0,"replyTime":"2019-12-03T03:11:40.000Z","msg":"就係唔想比對家知真ip所以經proxy出<br />\n<br />\n係想知有冇方法nginx每次收到一個request就refresh埋個connection<br />\n利申自動refresh唔係要求不過test果時想整個制一禁就reload爽d<br />\n<br />\n宜家係client加句 <code>&lt;meta http-equiv</code> 自己耐唔耐就f5一次<br />\n<br />\n個底係lua同redis拎野 然後proxy_pass一個var既path<br />\n所以唔洗reload個nginx<br />\n<br />\n最後apply就好似看更咁開住幾個畫面 然後有需要就某條stream轉台<br />\n<br />\nTLDR <br />\ndynamic果part做左 屎忽痕想手動轉自動 reload一個div唔知可唔可行"},{"pid":"1f312cb53bd72750fcf33e966c6bcf679bca76fa","tid":1765427,"uid":69481,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2019-12-03T05:49:56.000Z","msg":"React Router - Sidebar<br />\n<a href=\"https://reacttraining.com/react-router/web/example/sidebar\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Freacttraining.com%2Freact-router%2Fweb%2Fexample%2Fsidebar&d=uyenQRwN%2F2p2tRNf%2Bb8L0VDApO%2Br9QW7Zx2priNtVuo%3D&h=5732483f\" data-auto-link target=\"_blank\">https://reacttraining.com/react-router/web/example/sidebar</a>"},{"pid":"d1c32bf1ab6087a6c7fbee04f601c34589354312","tid":1765427,"uid":143275,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2019-12-03T06:55:44.000Z","msg":"<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/History/hello-world.html\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FHistory%2Fhello-world.html&d=uyenQRwN%2F2p2tRNf%2Bb8L0VDApO%2Br9QW7Zx2priNtVuo%3D&h=7c8b089a\" data-auto-link target=\"_blank\">https://developer.mozilla.org/en-US/docs/Web/API/History/hello-world.html</a>"},{"pid":"0f0f5bdf275e57d28fba242063d8426805470b88","tid":1765427,"uid":143275,"like":1,"dislike":0,"score":1,"citedBy":0,"replyTime":"2019-12-03T07:41:37.000Z","msg":"<blockquote><del><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/History/hello-world.html\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FHistory%2Fhello-world.html&d=uyenQRwN%2F2p2tRNf%2Bb8L0VDApO%2Br9QW7Zx2priNtVuo%3D&h=7c8b089a\" data-auto-link target=\"_blank\">https://developer.mozilla.org/en-US/docs/Web/API/History/hello-world.html</a></del></blockquote><br />\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/History/pushState\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FHistory%2FpushState&d=uyenQRwN%2F2p2tRNf%2Bb8L0VDApO%2Br9QW7Zx2priNtVuo%3D&h=336ef4f9\" data-auto-link target=\"_blank\">https://developer.mozilla.org/en-US/docs/Web/API/History/pushState</a>"},{"pid":"0f193e520659d1ff45aa53c67ecdbcd08ad4f3c1","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-12-17T08:05:45.000Z","msg":"咁有無方法可以整到個restful api只係比自己個網access到?"},{"pid":"c5c4c5e37355e06fac0da9d927080126bdbd1715","tid":1765427,"uid":32650,"like":0,"dislike":0,"score":0,"quote":{"pid":"0f193e520659d1ff45aa53c67ecdbcd08ad4f3c1","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-12-17T08:05:45.000Z","msg":"咁有無方法可以整到個restful api只係比自己個網access到?"},"citedBy":1,"replyTime":"2019-12-17T12:55:53.000Z","msg":"用 jwt Token"},{"pid":"9d7460bc0ed8f54f90f10a9dc420a47091fc2a10","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"quote":{"pid":"c5c4c5e37355e06fac0da9d927080126bdbd1715","tid":1765427,"uid":32650,"like":0,"dislike":0,"score":0,"quote":{"pid":"0f193e520659d1ff45aa53c67ecdbcd08ad4f3c1","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-12-17T08:05:45.000Z","msg":"咁有無方法可以整到個restful api只係比自己個網access到?"},"citedBy":1,"replyTime":"2019-12-17T12:55:53.000Z","msg":"用 jwt Token"},"citedBy":1,"replyTime":"2019-12-17T12:56:50.000Z","msg":"<img src=\"/assets/faces/normal/love.gif\" class=\"hkgmoji\" />"},{"pid":"6a3d0b1b139fd09ba23d69c6cd726b2cbca6853a","tid":1765427,"uid":23094,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-12-17T14:39:26.000Z","msg":"Keywords:<br />\nHTML5 History API<br />\nSingle Page Application"},{"pid":"fd7a8c251ff1af4205431f951396963ce6edd841","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"quote":{"pid":"6a3d0b1b139fd09ba23d69c6cd726b2cbca6853a","tid":1765427,"uid":23094,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-12-17T14:39:26.000Z","msg":"Keywords:<br />\nHTML5 History API<br />\nSingle Page Application"},"citedBy":1,"replyTime":"2019-12-17T14:45:35.000Z","msg":"咁有無方法可以整到個restful api只係比自己個網access到?"},{"pid":"47eeb1f9fd5d537420d10c3f95f0f7932ef2455f","tid":1765427,"uid":32650,"like":0,"dislike":0,"score":0,"quote":{"pid":"9d7460bc0ed8f54f90f10a9dc420a47091fc2a10","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"quote":{"pid":"c5c4c5e37355e06fac0da9d927080126bdbd1715","tid":1765427,"uid":32650,"like":0,"dislike":0,"score":0,"quote":{"pid":"0f193e520659d1ff45aa53c67ecdbcd08ad4f3c1","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-12-17T08:05:45.000Z","msg":"咁有無方法可以整到個restful api只係比自己個網access到?"},"citedBy":1,"replyTime":"2019-12-17T12:55:53.000Z","msg":"用 jwt Token"},"citedBy":1,"replyTime":"2019-12-17T12:56:50.000Z","msg":"<img src=\"/assets/faces/normal/love.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2019-12-17T15:25:52.000Z","msg":"印象中 request 入面其中一個parameter 有contain 個網頁既url. <br />\n<br />\n你係backend 個度加個Logic 去verify<br />\n if(url != myUrl) send error <br />\nelse send result"},{"pid":"1cce5e39a3b185a4a77f9e3f3402ac4f40d6675f","tid":1765427,"uid":23094,"like":0,"dislike":0,"score":0,"quote":{"pid":"fd7a8c251ff1af4205431f951396963ce6edd841","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"quote":{"pid":"6a3d0b1b139fd09ba23d69c6cd726b2cbca6853a","tid":1765427,"uid":23094,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-12-17T14:39:26.000Z","msg":"Keywords:<br />\nHTML5 History API<br />\nSingle Page Application"},"citedBy":1,"replyTime":"2019-12-17T14:45:35.000Z","msg":"咁有無方法可以整到個restful api只係比自己個網access到?"},"citedBy":0,"replyTime":"2019-12-17T15:27:35.000Z","msg":"Backend language有好多種<br />\n呢期興Node.js，遲啲興Deno<br />\nKeywords:<br />\nNode.js + Express"},{"pid":"d191e106024de025369943bd6168d2b2b620a68b","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"quote":{"pid":"47eeb1f9fd5d537420d10c3f95f0f7932ef2455f","tid":1765427,"uid":32650,"like":0,"dislike":0,"score":0,"quote":{"pid":"9d7460bc0ed8f54f90f10a9dc420a47091fc2a10","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"quote":{"pid":"c5c4c5e37355e06fac0da9d927080126bdbd1715","tid":1765427,"uid":32650,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-12-17T12:55:53.000Z","msg":"用 jwt Token"},"citedBy":1,"replyTime":"2019-12-17T12:56:50.000Z","msg":"<img src=\"/assets/faces/normal/love.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2019-12-17T15:25:52.000Z","msg":"印象中 request 入面其中一個parameter 有contain 個網頁既url. <br />\n<br />\n你係backend 個度加個Logic 去verify<br />\n if(url != myUrl) send error <br />\nelse send result"},"citedBy":1,"replyTime":"2019-12-17T15:42:09.000Z","msg":"但係咁樣人地可以set request header扮,<br />\n跟住又係可以唔經我個網去access個api"},{"pid":"8802cfd069ca9edf498bf0c0b84521ad8874b8c6","tid":1765427,"uid":23094,"like":0,"dislike":0,"score":0,"quote":{"pid":"d191e106024de025369943bd6168d2b2b620a68b","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"quote":{"pid":"47eeb1f9fd5d537420d10c3f95f0f7932ef2455f","tid":1765427,"uid":32650,"like":0,"dislike":0,"score":0,"quote":{"pid":"9d7460bc0ed8f54f90f10a9dc420a47091fc2a10","tid":1765427,"uid":65030,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-12-17T12:56:50.000Z","msg":"<img src=\"/assets/faces/normal/love.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2019-12-17T15:25:52.000Z","msg":"印象中 request 入面其中一個parameter 有contain 個網頁既url. <br />\n<br />\n你係backend 個度加個Logic 去verify<br />\n if(url != myUrl) send error <br />\nelse send result"},"citedBy":1,"replyTime":"2019-12-17T15:42:09.000Z","msg":"但係咁樣人地可以set request header扮,<br />\n跟住又係可以唔經我個網去access個api"},"citedBy":0,"replyTime":"2019-12-17T16:15:05.000Z","msg":"<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FHTTP%2FHeaders%2FAccess-Control-Allow-Origin&d=uyenQRwN%2F2p2tRNf%2Bb8L0VDApO%2Br9QW7Zx2priNtVuo%3D&h=e9d2c372\" target=\"_blank\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin</a>"}]}