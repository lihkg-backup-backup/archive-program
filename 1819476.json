{"tid":1819476,"cid":26,"subCid":0,"title":"點樣先可以完美咁防止到超過1001個回應嘅問題？","createTime":"2020-01-10T22:39:18.000Z","updateTime":"2020-01-12T17:23:06.000Z","uid":64694,"like":2,"dislike":0,"uniUserReply":15,"replies":[{"pid":"596aea17cae3481390063954781aae5622f60ee5","tid":1819476,"uid":64694,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2020-01-10T22:39:18.000Z","msg":"高登同連登都有呢個問題，就係如果同一時間太多人回覆，有機會突破1001，應該係時間太相近，所以導致大家都過到if checking，點先可以防止到呢個問題呢？<br />\n<br />\n用鎖？<img src=\"/assets/faces/lomoji/26.png\" class=\"hkgmoji\" />"},{"pid":"8d8bdf710c1d98ee5879faf406168412dd2b2b3a","tid":1819476,"uid":35092,"like":1,"dislike":2,"score":-1,"citedBy":2,"replyTime":"2020-01-11T00:25:49.000Z","msg":"過左照 insert，我query 淨係 select 頭 1001 個，之後果 D 唔出，你咬我？<img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" />"},{"pid":"fc9e5c90bc14d1040a1c3c831bfb47ccad1c7e2b","tid":1819476,"uid":64694,"like":0,"dislike":0,"score":0,"quote":{"pid":"8d8bdf710c1d98ee5879faf406168412dd2b2b3a","tid":1819476,"uid":35092,"like":1,"dislike":2,"score":-1,"citedBy":2,"replyTime":"2020-01-11T00:25:49.000Z","msg":"過左照 insert，我query 淨係 select 頭 1001 個，之後果 D 唔出，你咬我？<img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" />"},"citedBy":0,"replyTime":"2020-01-11T00:43:43.000Z","msg":"咁咪食咗人哋個回覆囉？<br />\n你食咗佢個comment重要return返成功畀佢<img src=\"/assets/faces/dog/haha.gif\" class=\"hkgmoji\" />"},{"pid":"d5ad18037de76cf5398bea820c72d68f1625ac2b","tid":1819476,"uid":64694,"like":0,"dislike":1,"score":-1,"quote":{"pid":"8d8bdf710c1d98ee5879faf406168412dd2b2b3a","tid":1819476,"uid":35092,"like":1,"dislike":2,"score":-1,"citedBy":2,"replyTime":"2020-01-11T00:25:49.000Z","msg":"過左照 insert，我query 淨係 select 頭 1001 個，之後果 D 唔出，你咬我？<img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2020-01-11T00:48:13.000Z","msg":"其實我問呢個問題係為咗引申出其他問題，就係呢如果畀錢之後增加數量，例如佢畀咗100蚊就買到一張車票喇，但問題就嚟喇，我點確保佢唔會insert嘅時候增加到變咗2呢？佢可能會連續requests之後快得濟食咗2次，係有呢個機會發生，雖然可能性唔大，但如果識啲IT知識嘅人可以做個bot去咁做<br />\n<br />\n點先限死到佢第二次過唔到個if，剩係第一次過到呢？<img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" />"},{"pid":"4b4d71a1e1ebcfe53fcd754977622087d8f43348","tid":1819476,"uid":106027,"like":1,"dislike":0,"score":1,"citedBy":1,"replyTime":"2020-01-11T00:49:31.000Z","msg":"點會唔得呀 冇心做姐"},{"pid":"73a26647e337ce18430cfe9e4a89f8e5d68cc172","tid":1819476,"uid":64694,"like":1,"dislike":0,"score":1,"quote":{"pid":"4b4d71a1e1ebcfe53fcd754977622087d8f43348","tid":1819476,"uid":106027,"like":1,"dislike":0,"score":1,"citedBy":1,"replyTime":"2020-01-11T00:49:31.000Z","msg":"點會唔得呀 冇心做姐"},"citedBy":0,"replyTime":"2020-01-11T00:51:56.000Z","msg":"我知應該得，不過可能好難搞？<br />\n其實係咪應該開transaction嘅時候加個鎖就解決到？"},{"pid":"9daaa8f75e824127ad3c2b5f34f0d911b6275bb4","tid":1819476,"uid":78383,"like":1,"dislike":2,"score":-1,"citedBy":1,"replyTime":"2020-01-11T00:53:40.000Z","msg":"禁回覆果時（打緊字未送出果時），個server已經記一記低，如果就快夠1001覆，用sql transaction level既if check, performance慢D，但準D"},{"pid":"384e8762614bbcde3886db8b50a8de0f45f6364d","tid":1819476,"uid":48452,"like":1,"dislike":1,"score":0,"citedBy":0,"replyTime":"2020-01-11T00:55:20.000Z","msg":"一律取消上限<br />\n完"},{"pid":"ae21514e7f5d35a70b6728108cc2c5f9eba529db","tid":1819476,"uid":106027,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2020-01-11T01:00:19.000Z","msg":"佢唔做到足我諗只係唔critical 放多你幾個都冇傷大雅 唔想影響performance/user experience <br />\n<br />\n或者只係當初唔記得做 廢時加返<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"},{"pid":"3448b02e0fd3116ed7e3d0a4af9467f8da16bbd3","tid":1819476,"uid":283984,"like":4,"dislike":0,"score":4,"citedBy":1,"replyTime":"2020-01-11T01:05:21.000Z","msg":"網絡上每個packet都有次序<br />\ncpu做野又係線性咁做落去<br />\n所有野都排晒次序<br />\n真係有兩個先後只係差一既insert<br />\n咁咪會第一個寫落去1001然後return success<br />\n第二個如果又想寫入去1001<br />\n發現1001寫左但又冇下一格可以寫咪自己收皮return fail<br />\n<br />\n<br />\n<br />\n<br />\n<br />\n<br />\n<br />\n<br />\n<br />\n<br />\n<br />\n<br />\n<br />\n<br />\n<br />\n<br />\n<br />\n雖則我估實際上應該只係按timestamp排加多個comment count<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"},{"pid":"aa3d4857bbb8b9ac467abff31fede7221191a878","tid":1819476,"uid":23953,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2020-01-11T03:32:53.000Z","msg":"you need blocking queue<img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" />"},{"pid":"245ba8dc484c040554b5f91d1062f65bda04659d","tid":1819476,"uid":163704,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2020-01-11T03:33:19.000Z","msg":"推<br />\n[全港最大的Fact Check平台-非食店篇]集合超過400間各地區各行業的良心店<br />\n<a href=\"https://lih.kg/1817378\" data-auto-link target=\"_blank\">https://lih.kg/1817378</a><br />\n- 分享自 LIHKG 討論區"},{"pid":"1040ccbe1023b2756c4fe04ebf983cfa3dd9e453","tid":1819476,"uid":25260,"like":1,"dislike":1,"score":0,"citedBy":0,"replyTime":"2020-01-11T03:36:27.000Z","msg":"你開post咪唔會有1001咁多回覆囉，完美解決"},{"pid":"f56124b9547391c94d52b308cf914c481ade423b","tid":1819476,"uid":23953,"like":2,"dislike":1,"score":1,"quote":{"pid":"9daaa8f75e824127ad3c2b5f34f0d911b6275bb4","tid":1819476,"uid":78383,"like":1,"dislike":2,"score":-1,"citedBy":1,"replyTime":"2020-01-11T00:53:40.000Z","msg":"禁回覆果時（打緊字未送出果時），個server已經記一記低，如果就快夠1001覆，用sql transaction level既if check, performance慢D，但準D"},"citedBy":0,"replyTime":"2020-01-11T03:37:44.000Z","msg":"樓主個問題純粹係排隊<br />\n廢柴先靠SQL，簡單複雜化<img src=\"/assets/faces/pig/mock.gif\" class=\"hkgmoji\" /><br />\n例如行緊transaction時，同DB斷左線果時，你點處理？"},{"pid":"58e2a33061e4e7109ea162ce3755c54729269d12","tid":1819476,"uid":35084,"like":1,"dislike":0,"score":1,"quote":{"pid":"d5ad18037de76cf5398bea820c72d68f1625ac2b","tid":1819476,"uid":64694,"like":0,"dislike":1,"score":-1,"quote":{"pid":"8d8bdf710c1d98ee5879faf406168412dd2b2b3a","tid":1819476,"uid":35092,"like":1,"dislike":2,"score":-1,"citedBy":2,"replyTime":"2020-01-11T00:25:49.000Z","msg":"過左照 insert，我query 淨係 select 頭 1001 個，之後果 D 唔出，你咬我？<img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2020-01-11T00:48:13.000Z","msg":"其實我問呢個問題係為咗引申出其他問題，就係呢如果畀錢之後增加數量，例如佢畀咗100蚊就買到一張車票喇，但問題就嚟喇，我點確保佢唔會insert嘅時候增加到變咗2呢？佢可能會連續requests之後快得濟食咗2次，係有呢個機會發生，雖然可能性唔大，但如果識啲IT知識嘅人可以做個bot去咁做<br />\n<br />\n點先限死到佢第二次過唔到個if，剩係第一次過到呢？<img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2020-01-11T04:07:45.000Z","msg":"係咪想講如果有個兩個人同一時間買車飛但係得淨番一張車票咁點算<img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><br />\n如果係，可以用database嘅transaction 功能，確保資料同一時間只可以入一批，確保唔會賣多"},{"pid":"aec8ba1a5fe852c1a79d4b52437ea6630ad980f3","tid":1819476,"uid":328061,"like":1,"dislike":5,"score":-4,"citedBy":0,"replyTime":"2020-01-11T05:00:36.000Z","msg":"諗埋啲咁複雜嘅問題好容易會<span style=\"color: orange;\">黐線</span> <img src=\"/assets/faces/dog/hehe.gif\" class=\"hkgmoji\" /><br />\n樓主, 上網搵套av睇下算啦 <br />\n可以減壓阿 <img src=\"/assets/faces/lm2/jable.gif\" class=\"hkgmoji\" /><br />\n<br />\n<br />\n伊朗承認責任, 誤射737客機"},{"pid":"ffbd2167a7fbe9bf2c01471edd66b14be8a6a1f6","tid":1819476,"uid":64694,"like":0,"dislike":1,"score":-1,"quote":{"pid":"58e2a33061e4e7109ea162ce3755c54729269d12","tid":1819476,"uid":35084,"like":1,"dislike":0,"score":1,"quote":{"pid":"d5ad18037de76cf5398bea820c72d68f1625ac2b","tid":1819476,"uid":64694,"like":0,"dislike":1,"score":-1,"quote":{"pid":"8d8bdf710c1d98ee5879faf406168412dd2b2b3a","tid":1819476,"uid":35092,"like":1,"dislike":2,"score":-1,"citedBy":2,"replyTime":"2020-01-11T00:25:49.000Z","msg":"過左照 insert，我query 淨係 select 頭 1001 個，之後果 D 唔出，你咬我？<img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2020-01-11T00:48:13.000Z","msg":"其實我問呢個問題係為咗引申出其他問題，就係呢如果畀錢之後增加數量，例如佢畀咗100蚊就買到一張車票喇，但問題就嚟喇，我點確保佢唔會insert嘅時候增加到變咗2呢？佢可能會連續requests之後快得濟食咗2次，係有呢個機會發生，雖然可能性唔大，但如果識啲IT知識嘅人可以做個bot去咁做<br />\n<br />\n點先限死到佢第二次過唔到個if，剩係第一次過到呢？<img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2020-01-11T04:07:45.000Z","msg":"係咪想講如果有個兩個人同一時間買車飛但係得淨番一張車票咁點算<img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><br />\n如果係，可以用database嘅transaction 功能，確保資料同一時間只可以入一批，確保唔會賣多"},"citedBy":2,"replyTime":"2020-01-11T05:20:04.000Z","msg":"唔係，我想講嘅係有條友想買車飛，本來佢係買一張，但佢立心不良想用一張飛嘅價錢買到兩張飛，所以佢快速咁連續send requests，希望快到個if checking認唔切變兩張"},{"pid":"ea52e3e580858cca4ce18fa716cdd7b87f3d05be","tid":1819476,"uid":35084,"like":0,"dislike":0,"score":0,"quote":{"pid":"ffbd2167a7fbe9bf2c01471edd66b14be8a6a1f6","tid":1819476,"uid":64694,"like":0,"dislike":1,"score":-1,"quote":{"pid":"58e2a33061e4e7109ea162ce3755c54729269d12","tid":1819476,"uid":35084,"like":1,"dislike":0,"score":1,"quote":{"pid":"d5ad18037de76cf5398bea820c72d68f1625ac2b","tid":1819476,"uid":64694,"like":0,"dislike":1,"score":-1,"citedBy":1,"replyTime":"2020-01-11T00:48:13.000Z","msg":"其實我問呢個問題係為咗引申出其他問題，就係呢如果畀錢之後增加數量，例如佢畀咗100蚊就買到一張車票喇，但問題就嚟喇，我點確保佢唔會insert嘅時候增加到變咗2呢？佢可能會連續requests之後快得濟食咗2次，係有呢個機會發生，雖然可能性唔大，但如果識啲IT知識嘅人可以做個bot去咁做<br />\n<br />\n點先限死到佢第二次過唔到個if，剩係第一次過到呢？<img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2020-01-11T04:07:45.000Z","msg":"係咪想講如果有個兩個人同一時間買車飛但係得淨番一張車票咁點算<img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><br />\n如果係，可以用database嘅transaction 功能，確保資料同一時間只可以入一批，確保唔會賣多"},"citedBy":2,"replyTime":"2020-01-11T05:20:04.000Z","msg":"唔係，我想講嘅係有條友想買車飛，本來佢係買一張，但佢立心不良想用一張飛嘅價錢買到兩張飛，所以佢快速咁連續send requests，希望快到個if checking認唔切變兩張"},"citedBy":2,"replyTime":"2020-01-11T05:26:50.000Z","msg":"用Mutex for same user request<br />\n<a href=\"https://zh.wikipedia.org/wiki/%E4%BA%92%E6%96%A5%E9%94%81\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E4%25BA%2592%25E6%2596%25A5%25E9%2594%2581&d=rH9paZ2ORyePGAAUSKfbjf%2BqeKGcMvuhkm4gAZs5aLs%3D&h=67a71335\" data-auto-link target=\"_blank\">https://zh.wikipedia.org/wiki/%E4%BA%92%E6%96%A5%E9%94%81</a>"},{"pid":"51622e1d15c10c4883be9bba5f73c46d1f66e4c7","tid":1819476,"uid":106027,"like":3,"dislike":0,"score":3,"quote":{"pid":"ffbd2167a7fbe9bf2c01471edd66b14be8a6a1f6","tid":1819476,"uid":64694,"like":0,"dislike":1,"score":-1,"quote":{"pid":"58e2a33061e4e7109ea162ce3755c54729269d12","tid":1819476,"uid":35084,"like":1,"dislike":0,"score":1,"quote":{"pid":"d5ad18037de76cf5398bea820c72d68f1625ac2b","tid":1819476,"uid":64694,"like":0,"dislike":1,"score":-1,"citedBy":1,"replyTime":"2020-01-11T00:48:13.000Z","msg":"其實我問呢個問題係為咗引申出其他問題，就係呢如果畀錢之後增加數量，例如佢畀咗100蚊就買到一張車票喇，但問題就嚟喇，我點確保佢唔會insert嘅時候增加到變咗2呢？佢可能會連續requests之後快得濟食咗2次，係有呢個機會發生，雖然可能性唔大，但如果識啲IT知識嘅人可以做個bot去咁做<br />\n<br />\n點先限死到佢第二次過唔到個if，剩係第一次過到呢？<img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2020-01-11T04:07:45.000Z","msg":"係咪想講如果有個兩個人同一時間買車飛但係得淨番一張車票咁點算<img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><br />\n如果係，可以用database嘅transaction 功能，確保資料同一時間只可以入一批，確保唔會賣多"},"citedBy":2,"replyTime":"2020-01-11T05:20:04.000Z","msg":"唔係，我想講嘅係有條友想買車飛，本來佢係買一張，但佢立心不良想用一張飛嘅價錢買到兩張飛，所以佢快速咁連續send requests，希望快到個if checking認唔切變兩張"},"citedBy":2,"replyTime":"2020-01-11T05:41:29.000Z","msg":"Same request 好多方法block 到 <br />\n就算真係有兩個requests 去到server咪兩個transactions 各用一張飛嘅價錢買一張飛<br />\n唔存在咩if check唔切<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"},{"pid":"01d866aa4f49972ba0df657026f4adac37976d34","tid":1819476,"uid":223932,"like":1,"dislike":0,"score":1,"citedBy":0,"replyTime":"2020-01-11T07:13:54.000Z","msg":"落個after insert trigger, 就可以prevent到."},{"pid":"e1ce7c7701dcaf124d964b9bbe466e029e4e258c","tid":1819476,"uid":64694,"like":0,"dislike":0,"score":0,"quote":{"pid":"ea52e3e580858cca4ce18fa716cdd7b87f3d05be","tid":1819476,"uid":35084,"like":0,"dislike":0,"score":0,"quote":{"pid":"ffbd2167a7fbe9bf2c01471edd66b14be8a6a1f6","tid":1819476,"uid":64694,"like":0,"dislike":1,"score":-1,"quote":{"pid":"58e2a33061e4e7109ea162ce3755c54729269d12","tid":1819476,"uid":35084,"like":1,"dislike":0,"score":1,"citedBy":1,"replyTime":"2020-01-11T04:07:45.000Z","msg":"係咪想講如果有個兩個人同一時間買車飛但係得淨番一張車票咁點算<img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><br />\n如果係，可以用database嘅transaction 功能，確保資料同一時間只可以入一批，確保唔會賣多"},"citedBy":2,"replyTime":"2020-01-11T05:20:04.000Z","msg":"唔係，我想講嘅係有條友想買車飛，本來佢係買一張，但佢立心不良想用一張飛嘅價錢買到兩張飛，所以佢快速咁連續send requests，希望快到個if checking認唔切變兩張"},"citedBy":2,"replyTime":"2020-01-11T05:26:50.000Z","msg":"用Mutex for same user request<br />\n<a href=\"https://zh.wikipedia.org/wiki/%E4%BA%92%E6%96%A5%E9%94%81\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E4%25BA%2592%25E6%2596%25A5%25E9%2594%2581&d=rH9paZ2ORyePGAAUSKfbjf%2BqeKGcMvuhkm4gAZs5aLs%3D&h=67a71335\" data-auto-link target=\"_blank\">https://zh.wikipedia.org/wiki/%E4%BA%92%E6%96%A5%E9%94%81</a>"},"citedBy":0,"replyTime":"2020-01-11T07:44:42.000Z","msg":"哦，即係喺if之前就已經lock咗佢，到搞完晒先放返出嚟"},{"pid":"4bb8cac3eb7f8e871fa181b80b5eee43f7326217","tid":1819476,"uid":64694,"like":0,"dislike":0,"score":0,"quote":{"pid":"ea52e3e580858cca4ce18fa716cdd7b87f3d05be","tid":1819476,"uid":35084,"like":0,"dislike":0,"score":0,"quote":{"pid":"ffbd2167a7fbe9bf2c01471edd66b14be8a6a1f6","tid":1819476,"uid":64694,"like":0,"dislike":1,"score":-1,"quote":{"pid":"58e2a33061e4e7109ea162ce3755c54729269d12","tid":1819476,"uid":35084,"like":1,"dislike":0,"score":1,"citedBy":1,"replyTime":"2020-01-11T04:07:45.000Z","msg":"係咪想講如果有個兩個人同一時間買車飛但係得淨番一張車票咁點算<img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><br />\n如果係，可以用database嘅transaction 功能，確保資料同一時間只可以入一批，確保唔會賣多"},"citedBy":2,"replyTime":"2020-01-11T05:20:04.000Z","msg":"唔係，我想講嘅係有條友想買車飛，本來佢係買一張，但佢立心不良想用一張飛嘅價錢買到兩張飛，所以佢快速咁連續send requests，希望快到個if checking認唔切變兩張"},"citedBy":2,"replyTime":"2020-01-11T05:26:50.000Z","msg":"用Mutex for same user request<br />\n<a href=\"https://zh.wikipedia.org/wiki/%E4%BA%92%E6%96%A5%E9%94%81\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E4%25BA%2592%25E6%2596%25A5%25E9%2594%2581&d=rH9paZ2ORyePGAAUSKfbjf%2BqeKGcMvuhkm4gAZs5aLs%3D&h=67a71335\" data-auto-link target=\"_blank\">https://zh.wikipedia.org/wiki/%E4%BA%92%E6%96%A5%E9%94%81</a>"},"citedBy":1,"replyTime":"2020-01-11T07:47:17.000Z","msg":"btw，以前好似讀過，好似有機會造成deadlock？"},{"pid":"b227c44dc868e64e5d9c9b9abcf3d31c824f2a42","tid":1819476,"uid":35084,"like":0,"dislike":0,"score":0,"quote":{"pid":"4bb8cac3eb7f8e871fa181b80b5eee43f7326217","tid":1819476,"uid":64694,"like":0,"dislike":0,"score":0,"quote":{"pid":"ea52e3e580858cca4ce18fa716cdd7b87f3d05be","tid":1819476,"uid":35084,"like":0,"dislike":0,"score":0,"quote":{"pid":"ffbd2167a7fbe9bf2c01471edd66b14be8a6a1f6","tid":1819476,"uid":64694,"like":0,"dislike":1,"score":-1,"citedBy":2,"replyTime":"2020-01-11T05:20:04.000Z","msg":"唔係，我想講嘅係有條友想買車飛，本來佢係買一張，但佢立心不良想用一張飛嘅價錢買到兩張飛，所以佢快速咁連續send requests，希望快到個if checking認唔切變兩張"},"citedBy":2,"replyTime":"2020-01-11T05:26:50.000Z","msg":"用Mutex for same user request<br />\n<a href=\"https://zh.wikipedia.org/wiki/%E4%BA%92%E6%96%A5%E9%94%81\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E4%25BA%2592%25E6%2596%25A5%25E9%2594%2581&d=rH9paZ2ORyePGAAUSKfbjf%2BqeKGcMvuhkm4gAZs5aLs%3D&h=67a71335\" data-auto-link target=\"_blank\">https://zh.wikipedia.org/wiki/%E4%BA%92%E6%96%A5%E9%94%81</a>"},"citedBy":1,"replyTime":"2020-01-11T07:47:17.000Z","msg":"btw，以前好似讀過，好似有機會造成deadlock？"},"citedBy":0,"replyTime":"2020-01-11T07:51:02.000Z","msg":"Lock完唔unlock番咪GG<br />\n睇下你點handle 架姐<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"},{"pid":"7268b99580b1831c5ebe69fbd23d661247176997","tid":1819476,"uid":328061,"like":1,"dislike":0,"score":1,"citedBy":0,"replyTime":"2020-01-11T09:55:45.000Z","msg":"星期一唔好返工，<span style=\"color: orange;\">放幾日假</span>休息下啦 <img src=\"/assets/faces/pig/dance.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/pig/dance2.gif\" class=\"hkgmoji\" />"},{"pid":"7a97f4ae2d29cb6ba7f034e3b081a6d8a9806004","tid":1819476,"uid":64694,"like":0,"dislike":2,"score":-2,"quote":{"pid":"51622e1d15c10c4883be9bba5f73c46d1f66e4c7","tid":1819476,"uid":106027,"like":3,"dislike":0,"score":3,"quote":{"pid":"ffbd2167a7fbe9bf2c01471edd66b14be8a6a1f6","tid":1819476,"uid":64694,"like":0,"dislike":1,"score":-1,"quote":{"pid":"58e2a33061e4e7109ea162ce3755c54729269d12","tid":1819476,"uid":35084,"like":1,"dislike":0,"score":1,"citedBy":1,"replyTime":"2020-01-11T04:07:45.000Z","msg":"係咪想講如果有個兩個人同一時間買車飛但係得淨番一張車票咁點算<img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /><br />\n如果係，可以用database嘅transaction 功能，確保資料同一時間只可以入一批，確保唔會賣多"},"citedBy":2,"replyTime":"2020-01-11T05:20:04.000Z","msg":"唔係，我想講嘅係有條友想買車飛，本來佢係買一張，但佢立心不良想用一張飛嘅價錢買到兩張飛，所以佢快速咁連續send requests，希望快到個if checking認唔切變兩張"},"citedBy":2,"replyTime":"2020-01-11T05:41:29.000Z","msg":"Same request 好多方法block 到 <br />\n就算真係有兩個requests 去到server咪兩個transactions 各用一張飛嘅價錢買一張飛<br />\n唔存在咩if check唔切<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2020-01-11T10:25:21.000Z","msg":"其實我個意思本來唔係咁，如果要再講得清楚啲嘅話就係<br />\n<br />\n我假設而家喺backend嗰度gen咗個one time password，之後send去畀frontend畀條友用一次，當條友send返條one time password返嚟backend，我if佢個one time password，check吓係唔係喺backend，如果喺就做嘢，check完如果存在就delete backend個one time password，如果check到backend冇呢條one time password就say bye bye，到呢度就係成個flow，應該冇問題<br />\n<br />\n但係問題就係嗰吓if嘅checking，我點保證佢唔會同時接收晒兩個連續快到阿媽都唔認得嘅requests，同時穿過句if呢？個感覺就好似突破1001咁，超過1001就係因為兩條非常接近嘅requests飛埋嚟，結果一同穿過句if，呃咗句if以為已經係最後一條，佢會認為兩條都係第1001條comment<br />\n<br />\n而家嘅情況就係兩條requests都擁有個one time password，而且非常接近去到server，會唔會就發生超過1001嘅情況發生呢？即係同時去到句if之後穿過，你話same request可以block到，但係如果係用兩部唔同電腦去咁啱一齊send過去又點搞呢？<br />\n<br />\n唔通就係好似上面位巴打提議用transaction同Mutex？<img src=\"/assets/faces/lomoji/26.png\" class=\"hkgmoji\" />"}]}