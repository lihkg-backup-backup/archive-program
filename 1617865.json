{"tid":1617865,"cid":26,"subCid":0,"title":"【窮撚VPS】OpenVZ IPv4 share NAT VPS 起匿名代理","createTime":"2019-10-04T02:28:22.000Z","updateTime":"2020-01-03T04:14:23.000Z","uid":17738,"like":5,"dislike":1,"uniUserReply":8,"replies":[{"pid":"17916e9f5e229b23b87bee346eafed2f23f4d56d","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2019-10-04T02:28:22.000Z","msg":"由於連登最近被支共網軍大肆攻擊，手法層出不窮，雖然對連仔有信心，但安全起見，唔好直接real ip暴露上連登較為妥當，亦避免ISP可以由DNS request睇到你去邊度，所以我基本上上lihkg全部用VPN或者代理<br />\n<br />\n最好方式當然買VPN服務，例如NordVPN呢類，但三年PLAN都成千銀，對於窮學生之類係一個負擔，似乎唔化算，所以寫個post點樣可以用最少錢玩到匿名代理，以ios用戶作為對象<br />\n<br />\n首先去<a href=\"https://i-83.net\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fi-83.net&d=beIwg85N8Ddzcl6rIyS0GY093lW9tX0rIZwo7%2BvO8Vk%3D&h=1b9be465\" target=\"_blank\">https://i-83.net</a> 買個最低配置嘅NAT VPS，呢間嘢母公司係<a href=\"https://quadhost.net\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fquadhost.net&d=beIwg85N8Ddzcl6rIyS0GY093lW9tX0rIZwo7%2BvO8Vk%3D&h=5f6b5df8\" target=\"_blank\">https://quadhost.net</a> 英國嘅VPS供應商，我幫襯咗幾年，有1個新加坡同1個美國嘅NAT VPS，都係128MB ram + 128MB swap, 5GB儲存空間，100M uplink@unlimited bandwitdh,市面上有唔少NAT VPS供應商，用佢係因為有support ticket同可以裝TOR client，TOR client唔做Relay或者ExitNode都唔係間間得，發現會suspend vps，佢最快係新加坡，香港ping值40ms左右，支境支國電信同支國移動約150～200ms左右，其次係BG嘅，香港ping值200ms左右，128MB只係2個半英鎊一年，大家樂食個早餐都未夠，穩定性幾好，只係裝代理足夠有餘，SG嘅cap圖<br />\n<img src=\"https://na.cx/i/Gs41Zxt.jpg\" data-thumbnail-src=\"https://i.lih.kg/thumbnail?u=https%3A%2F%2Fna.cx%2Fi%2FGs41Zxt.jpg&h=45688822&s={SIZE}\" /><br />\n<br />\n買咗之後裝最細嘅系統，32bit有就裝，我用嘅係ubuntu 14.04-minimal LTS 32bit,會用少啲ram，非大流量大文件讀寫同64bit OS分別唔大，但系統用少十幾MB嘅，由於NAT VPS共用IPv4，獨立嘅IPv6，只有20個port分配，internal address 最後個數字 + 1-20就係可以對外連接嘅port , ssh port就係最後訴字 + 22，如圖<br />\n<img src=\"https://na.cx/i/AidFvO3.png\" data-thumbnail-src=\"https://i.lih.kg/thumbnail?u=https%3A%2F%2Fna.cx%2Fi%2FAidFvO3.png&h=996493bb&s={SIZE}\" /><br />\n我呢個SG嘅分配 port係 16901～16920，ssh port係16922，外部IPv4喺呢度見到,佢亦會電郵比你 <a href=\"https://i-83.net/#network\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fi-83.net%2F%23network&d=beIwg85N8Ddzcl6rIyS0GY093lW9tX0rIZwo7%2BvO8Vk%3D&h=b6d1a699\" target=\"_blank\">https://i-83.net/#network</a> ，windows下載putty /kitty，輸入你買嘅時候嘅root密碼，port，ipv4地址就連上VPS<br />\n<br />\n入到VPS首先執行<br />\n<code>\napt-get update &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get install python curl nano lynx\n</code><br />\n通常簡化到乜都冇嘅，之後執行<br />\n<code>\nnano /etc/sysctl.conf\n</code><br />\n 搵到<br />\n<code>\n#net.ipv4.ip_forward = 1\n</code><br />\n去咗個#<br />\n之後安裝 tor <br />\n<code>\napt-get install tor\n<pre><code data-type=\"\">5f0a08975089b467983204</code></pre> echo &quot;ClientOnly 1&quot; &gt;&gt; /etc/tor/torrc</code><br />\nrestart TOR <br />\n<pre><code data-type=\"\">/etc/init.d/tor restart</code></pre><br />\n然後下載brook<br />\nLinux 32bit<br />\n<code>\nwget --no-check-certificate -O brook https://github.com/txthinking/brook/releases/download/v20190601/brook_linux_386\n</code><br />\nLinux 64bit<br />\n<code>\nwget --no-check-certificate https://github.com/txthinking/brook/releases/download/v20190601/brook\n</code><br />\n改為可執行<br />\n<code>\nchmod +x brook\n</code><br />\n執行brook，單用戶，以我SG嘅VPS可用port為例，要根據實際填入你嘅port<br />\n<code>\nnohup ./brook server -l :16901 password &amp;\n<pre><code data-type=\"\">5f0a0897508b71114539727</code></pre> \nnohup ./brook servers -l &quot;:16901 password&quot; -l &quot;:16902 password2&quot; &amp;\n\n<pre><code data-type=\"\">5f0a0897508bb158757789</code></pre> \nwget --no-check-certificate https://raw.githubusercontent.com/ruped24/toriptables2/master/toriptables2.py &amp;&amp; chmod +x toriptables2.py\n\n<pre><code data-type=\"\">5f0a0897508c2295270760</code></pre>\ncurl -4 ifconfig.co\n</code> <br />\n完"},{"pid":"861e5a101244420f3f6ae6c1cfd46f972941661f","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2019-10-04T02:30:03.000Z","msg":"似乎編輯有問題<br />\n<br />\n開關TOR<br />\n<br />\n<img src=\"https://na.cx/i/Ug60v6i.jpg\" data-thumbnail-src=\"https://i.lih.kg/thumbnail?u=https%3A%2F%2Fna.cx%2Fi%2FUg60v6i.jpg&h=3f30e2c1&s={SIZE}\" />"},{"pid":"773ceb1d59eb62ac340179c0381c70c0eb698e31","tid":1617865,"uid":196758,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2019-10-04T02:32:53.000Z","msg":"push"},{"pid":"7ddc529a4d7fe1357fccc1e840d9a6fcd3a2a743","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-10-04T02:34:21.000Z","msg":"ios app store有ssh remote app, 可以寫定命令入去button，記得全path<br />\n例如<br />\n<code>/root/toriptables2.py -f\n\n</code>"},{"pid":"cb8353e9e1713071c4ab5753ab9f76718c6856a1","tid":1617865,"uid":196758,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-10-04T02:34:32.000Z","msg":"有少少錢可以去 lowendbox 度搵其他平vps<br />\n<br />\n唔洗用nat咁慘<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><br />\n443 port好重要"},{"pid":"ffac5c6a65e3074fe8dbb95b07880f111f97d368","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"quote":{"pid":"7ddc529a4d7fe1357fccc1e840d9a6fcd3a2a743","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-10-04T02:34:21.000Z","msg":"ios app store有ssh remote app, 可以寫定命令入去button，記得全path<br />\n例如<br />\n<code>/root/toriptables2.py -f\n\n</code>"},"citedBy":0,"replyTime":"2019-10-04T02:34:38.000Z","msg":"<a href=\"https://apps.apple.com/us/app/ssh-remote/id931573495\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fapps.apple.com%2Fus%2Fapp%2Fssh-remote%2Fid931573495&d=beIwg85N8Ddzcl6rIyS0GY093lW9tX0rIZwo7%2BvO8Vk%3D&h=0c4dcc6c\" target=\"_blank\">https://apps.apple.com/us/app/ssh-remote/id931573495</a>"},{"pid":"aba5091720c202bd483d9c9d43b53cdf0fecd8cf","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"quote":{"pid":"cb8353e9e1713071c4ab5753ab9f76718c6856a1","tid":1617865,"uid":196758,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-10-04T02:34:32.000Z","msg":"有少少錢可以去 lowendbox 度搵其他平vps<br />\n<br />\n唔洗用nat咁慘<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><br />\n443 port好重要"},"citedBy":0,"replyTime":"2019-10-04T02:39:47.000Z","msg":"以最平為原則嘛，速度就唔好太大期望，上lihkg冇問題嘅<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"},{"pid":"cb60b4335b54eb9d13ccb5f2457c2f83a744cb5c","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2019-10-04T02:47:47.000Z","msg":"ios client<br />\n<img src=\"https://na.cx/i/RgieADp.jpg\" data-thumbnail-src=\"https://i.lih.kg/thumbnail?u=https%3A%2F%2Fna.cx%2Fi%2FRgieADp.jpg&h=2a75a408&s={SIZE}\" /><br />\n<br />\nIP check<br />\n<br />\n<img src=\"https://na.cx/i/byHZMLf.png\" data-thumbnail-src=\"https://i.lih.kg/thumbnail?u=https%3A%2F%2Fna.cx%2Fi%2FbyHZMLf.png&h=91e910bf&s={SIZE}\" /><br />\n<br />\n上連登web 版，呢部iPhone冇裝app嘅<br />\n<br />\n<img src=\"https://na.cx/i/zf6Ppxc.png\" data-thumbnail-src=\"https://i.lih.kg/thumbnail?u=https%3A%2F%2Fna.cx%2Fi%2Fzf6Ppxc.png&h=de91dd56&s={SIZE}\" />"},{"pid":"93b2ff84d8db417c6ff466a5bb82c94f3d5fafe6","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2019-10-04T02:49:49.000Z","msg":"telegram 使用brook要咁<br />\n<br />\n<a href=\"https://github.com/txthinking/brook/issues/285\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fgithub.com%2Ftxthinking%2Fbrook%2Fissues%2F285&d=beIwg85N8Ddzcl6rIyS0GY093lW9tX0rIZwo7%2BvO8Vk%3D&h=c8e113fa\" target=\"_blank\">https://github.com/txthinking/brook/issues/285</a>"},{"pid":"7a6d6fccc9817b039601f69f1e3bebf9d48fee74","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2019-10-04T03:21:41.000Z","msg":"NAT VPS可以裝到OpenVPN，要去供應商嘅client area，喺Control Panel開番選項<br />\n<img src=\"https://na.cx/i/i067VPz.png\" data-thumbnail-src=\"https://i.lih.kg/thumbnail?u=https%3A%2F%2Fna.cx%2Fi%2Fi067VPz.png&h=0c5cd6da&s={SIZE}\" /><br />\n<br />\n然後免麻煩用人哋寫好嘅shell script安裝，如<br />\n<a href=\"https://github.com/angristan/openvpn-install\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fgithub.com%2Fangristan%2Fopenvpn-install&d=beIwg85N8Ddzcl6rIyS0GY093lW9tX0rIZwo7%2BvO8Vk%3D&h=1b803789\" target=\"_blank\">https://github.com/angristan/openvpn-install</a><br />\n<a href=\"https://github.com/Nyr/openvpn-install\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fgithub.com%2FNyr%2Fopenvpn-install&d=beIwg85N8Ddzcl6rIyS0GY093lW9tX0rIZwo7%2BvO8Vk%3D&h=34c3a5bd\" target=\"_blank\">https://github.com/Nyr/openvpn-install</a><br />\n<a href=\"https://hosting.gullo.me/plugin/support_manager/knowledgebase/view/6/nat-ipv4-how-to-set-up-openvpn/4/\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fhosting.gullo.me%2Fplugin%2Fsupport_manager%2Fknowledgebase%2Fview%2F6%2Fnat-ipv4-how-to-set-up-openvpn%2F4%2F&d=beIwg85N8Ddzcl6rIyS0GY093lW9tX0rIZwo7%2BvO8Vk%3D&h=26a21555\" target=\"_blank\">https://hosting.gullo.me/plugin/support_manager/knowledgebase/view/6/nat-ipv4-how-to-set-up-openvpn/4/</a>"},{"pid":"a34250b871aca65bdc57418968bcdc2cd50f73f2","tid":1617865,"uid":166808,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2019-10-04T10:20:15.000Z","msg":"<img src=\"/assets/faces/normal/clown.gif\" class=\"hkgmoji\" />"},{"pid":"325a7d58312b9f1d55f3d23860c10c7b6718467a","tid":1617865,"uid":128595,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2019-10-04T11:08:53.000Z","msg":"如果買左vpn , 係屋企用wifi call / 出街用volte ,會唔會咁樣比人將vpn ip同電話號碼掛勾?<br />\n- 分享自 LIHKG 討論區<br />\n<a href=\"https://lih.kg/1620626\" data-auto-link target=\"_blank\">https://lih.kg/1620626</a>"},{"pid":"ab75f69641ad8242719b0c4f41caf54f5c557a41","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-10-04T11:26:05.000Z","msg":"唔比打命令？"},{"pid":"550e6c4738dcfba874ec82f68f302ba73c083641","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"quote":{"pid":"ab75f69641ad8242719b0c4f41caf54f5c557a41","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-10-04T11:26:05.000Z","msg":"唔比打命令？"},"citedBy":1,"replyTime":"2019-10-04T11:27:21.000Z","msg":"<img src=\"https://na.cx/i/iUGjPDL.png\" data-thumbnail-src=\"https://i.lih.kg/thumbnail?u=https%3A%2F%2Fna.cx%2Fi%2FiUGjPDL.png&h=acd5dbef&s={SIZE}\" />"},{"pid":"758e1e43ecfa7ee27acd443d9db0941d46e16a2a","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"quote":{"pid":"550e6c4738dcfba874ec82f68f302ba73c083641","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"quote":{"pid":"ab75f69641ad8242719b0c4f41caf54f5c557a41","tid":1617865,"uid":17738,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2019-10-04T11:26:05.000Z","msg":"唔比打命令？"},"citedBy":1,"replyTime":"2019-10-04T11:27:21.000Z","msg":"<img src=\"https://na.cx/i/iUGjPDL.png\" data-thumbnail-src=\"https://i.lih.kg/thumbnail?u=https%3A%2F%2Fna.cx%2Fi%2FiUGjPDL.png&h=acd5dbef&s={SIZE}\" />"},"citedBy":0,"replyTime":"2019-10-04T11:27:43.000Z","msg":"漏咗 )"},{"pid":"cf103ee9aa2d2b267699fdd40d400576293bf9f2","tid":1617865,"uid":1646,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2019-10-04T12:20:37.000Z","msg":"推"},{"pid":"89d7f524c7c7e276ce55bec4b8ba45372c415edd","tid":1617865,"uid":177219,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2019-10-05T02:30:30.000Z","msg":"支持巴打"},{"pid":"92a9fd2d8fa96b7d8f36e9bbee0cd33369fe497e","tid":1617865,"uid":145292,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2020-01-02T10:27:03.000Z","msg":"有無speedtest？"},{"pid":"4135fac8b711f831edd3ffc2cd2082db4472edd5","tid":1617865,"uid":2474,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2020-01-03T04:14:23.000Z","msg":"pish<img src=\"/assets/faces/xm/good.gif\" class=\"hkgmoji\" />"}]}