{"tid":2008568,"cid":26,"subCid":0,"title":"有咩log stack好用","createTime":"2020-05-09T06:32:37.000Z","updateTime":"2020-05-18T11:00:01.000Z","uid":73026,"like":1,"dislike":2,"uniUserReply":5,"replies":[{"pid":"27cfbbf6f8d19359fe999339089e5bfe5bba3d28","tid":2008568,"uid":73026,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2020-05-09T06:32:37.000Z","msg":"如題<br />\n當有幾百部servers，<br />\n會generates唔同既logs，但d logs 係semi-structural，requirements:<br />\n1. volume 唔算細，正常scalable / 唔會太慢<br />\n2. 可以index到 d log入邊既某d field<br />\n2. 可以search by log 入邊某d field, 再group by 同 aggregate value<br />\n3. dashboard可以自己query 黎visualize <br />\n4. 可以set alerts，例如某keyboard 既volume／hour 低過一個threshold 就send alerts<br />\n<br />\n最正路係咪elasticSearch + fluentd + kibana / elasticSearch + logstash + kibana個d？<br />\n定係有冇其他選抹可以syslog + 其他datastore + visualizaiton?"},{"pid":"3724ac39e076aec24976a8686e85f8d3da2b57f9","tid":2008568,"uid":12636,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-09T09:15:14.000Z","msg":"sumologic"},{"pid":"3b9a0e8321f678e99765899bfba89b4a3abf2847","tid":2008568,"uid":73026,"like":0,"dislike":0,"score":0,"quote":{"pid":"3724ac39e076aec24976a8686e85f8d3da2b57f9","tid":2008568,"uid":12636,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-09T09:15:14.000Z","msg":"sumologic"},"citedBy":1,"replyTime":"2020-05-09T09:41:49.000Z","msg":"講多d ok？"},{"pid":"e939e9e60f9a3a0e779c5f124aa6df8e25bb842a","tid":2008568,"uid":12636,"like":0,"dislike":1,"score":-1,"quote":{"pid":"3b9a0e8321f678e99765899bfba89b4a3abf2847","tid":2008568,"uid":73026,"like":0,"dislike":0,"score":0,"quote":{"pid":"3724ac39e076aec24976a8686e85f8d3da2b57f9","tid":2008568,"uid":12636,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-09T09:15:14.000Z","msg":"sumologic"},"citedBy":1,"replyTime":"2020-05-09T09:41:49.000Z","msg":"講多d ok？"},"citedBy":0,"replyTime":"2020-05-09T12:08:05.000Z","msg":"1. volume 唔算細，正常scalable / 唔會太慢<br />\n做到<br />\n2. 可以index到 d log入邊既某d field<br />\n我都唔知<br />\n2. 可以search by log 入邊某d field, 再group by 同 aggregate value<br />\n做到<br />\n3. dashboard可以自己query 黎visualize <br />\n做到<br />\n4. 可以set alerts，例如某keyboard 既volume／hour 低過一個threshold 就send alerts<br />\n做到<br />\n<br />\n佢有free trial. 好似幾百mb. 不過testing 夠你用. 可以你manual upload log 上去. 亦可以裝agent , 經agent 搵你d server 攞log再upload.<br />\n不過testing 前者試下先."},{"pid":"ea46bb9ad70ad847bff716ec5056c91889c64ca1","tid":2008568,"uid":23953,"like":1,"dislike":0,"score":1,"citedBy":1,"replyTime":"2020-05-09T12:24:35.000Z","msg":"你需要嘅唔係log,係metrics"},{"pid":"883ee5f3965562c21608dbc2f30453d495f687a8","tid":2008568,"uid":20840,"like":1,"dislike":0,"score":1,"citedBy":1,"replyTime":"2020-05-09T13:02:40.000Z","msg":"syslog可以integrate ELK"},{"pid":"bb12bd7bc487fdc90b64ea51170938f59a30d5fc","tid":2008568,"uid":73026,"like":0,"dislike":0,"score":0,"quote":{"pid":"883ee5f3965562c21608dbc2f30453d495f687a8","tid":2008568,"uid":20840,"like":1,"dislike":0,"score":1,"citedBy":1,"replyTime":"2020-05-09T13:02:40.000Z","msg":"syslog可以integrate ELK"},"citedBy":1,"replyTime":"2020-05-09T13:36:14.000Z","msg":"<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><br />\n個setup係咪類似<br />\nsyslog --&gt; logstash --&gt; elasticSearch<br />\n之後kibana 再query from elasticSearch?"},{"pid":"3ad90a1bf29cfe87fd3dbb61af0c8d549f4ff5d0","tid":2008568,"uid":73026,"like":0,"dislike":0,"score":0,"quote":{"pid":"ea46bb9ad70ad847bff716ec5056c91889c64ca1","tid":2008568,"uid":23953,"like":1,"dislike":0,"score":1,"citedBy":1,"replyTime":"2020-05-09T12:24:35.000Z","msg":"你需要嘅唔係log,係metrics"},"citedBy":0,"replyTime":"2020-05-09T13:38:05.000Z","msg":"部份logs可以aggregate做metrics<br />\n但係有時都要grep 返log黎trace返 d events"},{"pid":"e361e28b660f8a2a93039dba60c3df4f4725ca71","tid":2008568,"uid":20840,"like":0,"dislike":0,"score":0,"quote":{"pid":"bb12bd7bc487fdc90b64ea51170938f59a30d5fc","tid":2008568,"uid":73026,"like":0,"dislike":0,"score":0,"quote":{"pid":"883ee5f3965562c21608dbc2f30453d495f687a8","tid":2008568,"uid":20840,"like":1,"dislike":0,"score":1,"citedBy":1,"replyTime":"2020-05-09T13:02:40.000Z","msg":"syslog可以integrate ELK"},"citedBy":1,"replyTime":"2020-05-09T13:36:14.000Z","msg":"<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><br />\n個setup係咪類似<br />\nsyslog --&gt; logstash --&gt; elasticSearch<br />\n之後kibana 再query from elasticSearch?"},"citedBy":1,"replyTime":"2020-05-09T13:44:07.000Z","msg":"係<br />\n<a href=\"https://www.elastic.co/guide/en/logstash/current/plugins-inputs-syslog.html\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fwww.elastic.co%2Fguide%2Fen%2Flogstash%2Fcurrent%2Fplugins-inputs-syslog.html&d=i%2FQ10njZfEvfzeNkfPb7d3wORrEXjPgA%2FW0mwV49OOk%3D&h=f5a6360b\" data-auto-link target=\"_blank\">https://www.elastic.co/guide/en/logstash/current/plugins-inputs-syslog.html</a>"},{"pid":"d39cd3e64c94c3ae8f5b13579c36d7e72c87727e","tid":2008568,"uid":73026,"like":0,"dislike":0,"score":0,"quote":{"pid":"e361e28b660f8a2a93039dba60c3df4f4725ca71","tid":2008568,"uid":20840,"like":0,"dislike":0,"score":0,"quote":{"pid":"bb12bd7bc487fdc90b64ea51170938f59a30d5fc","tid":2008568,"uid":73026,"like":0,"dislike":0,"score":0,"quote":{"pid":"883ee5f3965562c21608dbc2f30453d495f687a8","tid":2008568,"uid":20840,"like":1,"dislike":0,"score":1,"citedBy":1,"replyTime":"2020-05-09T13:02:40.000Z","msg":"syslog可以integrate ELK"},"citedBy":1,"replyTime":"2020-05-09T13:36:14.000Z","msg":"<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><br />\n個setup係咪類似<br />\nsyslog --&gt; logstash --&gt; elasticSearch<br />\n之後kibana 再query from elasticSearch?"},"citedBy":1,"replyTime":"2020-05-09T13:44:07.000Z","msg":"係<br />\n<a href=\"https://www.elastic.co/guide/en/logstash/current/plugins-inputs-syslog.html\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fwww.elastic.co%2Fguide%2Fen%2Flogstash%2Fcurrent%2Fplugins-inputs-syslog.html&d=i%2FQ10njZfEvfzeNkfPb7d3wORrEXjPgA%2FW0mwV49OOk%3D&h=f5a6360b\" data-auto-link target=\"_blank\">https://www.elastic.co/guide/en/logstash/current/plugins-inputs-syslog.html</a>"},"citedBy":1,"replyTime":"2020-05-09T13:56:49.000Z","msg":"\bthanks，我再read下 docs睇下點先<br />\n巴打係咪有setup過for production use?<br />\n有冇d咩goctha？"},{"pid":"22a2596b85f80844b0e23d3bac468c3601f72f8a","tid":2008568,"uid":2357,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2020-05-09T14:06:20.000Z","msg":"<a href=\"https://github.com/grafana/loki\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fgithub.com%2Fgrafana%2Floki&d=i%2FQ10njZfEvfzeNkfPb7d3wORrEXjPgA%2FW0mwV49OOk%3D&h=6453a83c\" data-auto-link target=\"_blank\">https://github.com/grafana/loki</a>"},{"pid":"9c577b081e63ddb5d5b8bb58874216251af9b1eb","tid":2008568,"uid":2357,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-09T14:10:58.000Z","msg":"一個grafana dashboard 食晒prometheus (metrics) 同loki (logs)"},{"pid":"7ee850a9d16ed36393b8c0d51b06fbe63fb2a504","tid":2008568,"uid":20840,"like":0,"dislike":0,"score":0,"quote":{"pid":"d39cd3e64c94c3ae8f5b13579c36d7e72c87727e","tid":2008568,"uid":73026,"like":0,"dislike":0,"score":0,"quote":{"pid":"e361e28b660f8a2a93039dba60c3df4f4725ca71","tid":2008568,"uid":20840,"like":0,"dislike":0,"score":0,"quote":{"pid":"bb12bd7bc487fdc90b64ea51170938f59a30d5fc","tid":2008568,"uid":73026,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-09T13:36:14.000Z","msg":"<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><br />\n個setup係咪類似<br />\nsyslog --&gt; logstash --&gt; elasticSearch<br />\n之後kibana 再query from elasticSearch?"},"citedBy":1,"replyTime":"2020-05-09T13:44:07.000Z","msg":"係<br />\n<a href=\"https://www.elastic.co/guide/en/logstash/current/plugins-inputs-syslog.html\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fwww.elastic.co%2Fguide%2Fen%2Flogstash%2Fcurrent%2Fplugins-inputs-syslog.html&d=i%2FQ10njZfEvfzeNkfPb7d3wORrEXjPgA%2FW0mwV49OOk%3D&h=f5a6360b\" data-auto-link target=\"_blank\">https://www.elastic.co/guide/en/logstash/current/plugins-inputs-syslog.html</a>"},"citedBy":1,"replyTime":"2020-05-09T13:56:49.000Z","msg":"\bthanks，我再read下 docs睇下點先<br />\n巴打係咪有setup過for production use?<br />\n有冇d咩goctha？"},"citedBy":0,"replyTime":"2020-05-09T16:20:44.000Z","msg":"production如果諗住長用建議買佢地個enterprise support<br />\n<br />\ntechnical方便基本上無咩特別難度, 因為ELK相對係市場上都比較mature同埋community都好大, 所以照跟返上網d best practice同reference set都已經ok, 如果你未玩過elasticsearch就可能上網睇下佢sharding replication同index ge mechanism先"},{"pid":"402e0f019ffd56d4dd37dbe1f4fc5a41a61c2588","tid":2008568,"uid":73026,"like":0,"dislike":0,"score":0,"quote":{"pid":"9c577b081e63ddb5d5b8bb58874216251af9b1eb","tid":2008568,"uid":2357,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-09T14:10:58.000Z","msg":"一個grafana dashboard 食晒prometheus (metrics) 同loki (logs)"},"citedBy":1,"replyTime":"2020-05-17T13:54:39.000Z","msg":"岩岩experiment 左就咁influxdb + grafana<br />\n好似都可以有差唔多效果<br />\nloki同influxdb比較有咩分別"},{"pid":"fed6e05f3e400606da6c590b73886300ffa1ec13","tid":2008568,"uid":2357,"like":0,"dislike":0,"score":0,"quote":{"pid":"402e0f019ffd56d4dd37dbe1f4fc5a41a61c2588","tid":2008568,"uid":73026,"like":0,"dislike":0,"score":0,"quote":{"pid":"9c577b081e63ddb5d5b8bb58874216251af9b1eb","tid":2008568,"uid":2357,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-09T14:10:58.000Z","msg":"一個grafana dashboard 食晒prometheus (metrics) 同loki (logs)"},"citedBy":1,"replyTime":"2020-05-17T13:54:39.000Z","msg":"岩岩experiment 左就咁influxdb + grafana<br />\n好似都可以有差唔多效果<br />\nloki同influxdb比較有咩分別"},"citedBy":0,"replyTime":"2020-05-18T11:00:01.000Z","msg":"無用過比唔到意見,不過loki應該係optimized for grafana,同一公司出"}]}