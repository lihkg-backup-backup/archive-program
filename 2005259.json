{"tid":2005259,"cid":26,"subCid":0,"title":"用夕陽技術docker swarm做左套nodejs postgres redis ha+lb stack出黎","createTime":"2020-05-07T03:57:36.000Z","updateTime":"2020-05-13T17:52:47.000Z","uid":28563,"like":12,"dislike":3,"uniUserReply":16,"replies":[{"pid":"b0b8f27ce2f4e73f7637bd93cb28187b31cfc7bf","tid":2005259,"uid":28563,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2020-05-07T03:57:36.000Z","msg":"小弟乞粒星<img src=\"/assets/faces/normal/cry.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/cry.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/cry.gif\" class=\"hkgmoji\" /><br />\n<br />\n<a href=\"https://github.com/Saren-Arterius/wtako-rest-swarm-template\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fgithub.com%2FSaren-Arterius%2Fwtako-rest-swarm-template&d=w9JnFmhD9tlFtzSpwKDBdeEzQ5hKls32m7Ak2FFrcx0%3D&h=670504ef\" target=\"_blank\">https://github.com/Saren-Arterius/wtako-rest-swarm-template</a><br />\n<br />\nIntroduction<br />\n<br />\nA high-availability, load-balanced express.js + postgresql + redis + db admin panels template, powered by docker swarm.<br />\n<br />\nJuice<br />\n<br />\nexpress.js: node 13, eslint, knex, @hapi/boom, bull, multer, firebase-admin (half-functional user system included)<br />\n<br />\npostgresql: postgres 12, patroni as replication controller, haproxy as ha+lb, pgroonga, pg-spgist<br />\n<br />\nredis: sentinel, socat, sentinel-proxy to hack get-master-addr-by-name<br />\n<br />\npgadmin: postgresql administration<br />\n<br />\nphpredmin: redis administration"},{"pid":"39e6382ea2b5a01dd71f3926b774c63cf660977e","tid":2005259,"uid":1886,"like":0,"dislike":10,"score":-10,"citedBy":0,"replyTime":"2020-05-07T07:58:07.000Z","msg":"<code>Windows Cortana 留名系統啟動，</code><br />\n<code>請勿負評干擾運作。</code>"},{"pid":"e94435d50a289ea94e1850f2e4121ff8c13feadf","tid":2005259,"uid":8005,"like":5,"dislike":0,"score":5,"citedBy":1,"replyTime":"2020-05-07T07:58:57.000Z","msg":"點解要用swarm....."},{"pid":"3dd5ab062a69723a2b3e3377f22fafcdc784f16d","tid":2005259,"uid":28563,"like":0,"dislike":0,"score":0,"quote":{"pid":"e94435d50a289ea94e1850f2e4121ff8c13feadf","tid":2005259,"uid":8005,"like":5,"dislike":0,"score":5,"citedBy":1,"replyTime":"2020-05-07T07:58:57.000Z","msg":"點解要用swarm....."},"citedBy":1,"replyTime":"2020-05-07T08:02:53.000Z","msg":"本身成舊野係compose黎，試下可唔可以加幾句野轉成cluster，同埋我冇k8s機<br />\n<br />\n<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"},{"pid":"b470e37a1b7071d67904a3205aefaa18f42e4f05","tid":2005259,"uid":8005,"like":0,"dislike":0,"score":0,"quote":{"pid":"3dd5ab062a69723a2b3e3377f22fafcdc784f16d","tid":2005259,"uid":28563,"like":0,"dislike":0,"score":0,"quote":{"pid":"e94435d50a289ea94e1850f2e4121ff8c13feadf","tid":2005259,"uid":8005,"like":5,"dislike":0,"score":5,"citedBy":1,"replyTime":"2020-05-07T07:58:57.000Z","msg":"點解要用swarm....."},"citedBy":1,"replyTime":"2020-05-07T08:02:53.000Z","msg":"本身成舊野係compose黎，試下可唔可以加幾句野轉成cluster，同埋我冇k8s機<br />\n<br />\n<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2020-05-07T08:19:36.000Z","msg":"Swarm 個cluster 唔係license 至起到，仲麻煩過學走k8s啦<img src=\"/assets/faces/normal/chicken.gif\" class=\"hkgmoji\" />"},{"pid":"8c448f880fc332480a03e39355bd600d8787ec89","tid":2005259,"uid":65030,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2020-05-07T11:52:40.000Z","msg":"咩黎, 解釋下"},{"pid":"98dbed2977ab7c2facf2ccf49d1089fa924b6877","tid":2005259,"uid":21699,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-07T11:55:46.000Z","msg":"docker swarm咁快就變左夕陽技術<img src=\"/assets/faces/normal/frown.gif\" class=\"hkgmoji\" />"},{"pid":"0d4dcd59c1926b74e205828290df091ba5ec37a9","tid":2005259,"uid":28563,"like":0,"dislike":0,"score":0,"quote":{"pid":"b470e37a1b7071d67904a3205aefaa18f42e4f05","tid":2005259,"uid":8005,"like":0,"dislike":0,"score":0,"quote":{"pid":"3dd5ab062a69723a2b3e3377f22fafcdc784f16d","tid":2005259,"uid":28563,"like":0,"dislike":0,"score":0,"quote":{"pid":"e94435d50a289ea94e1850f2e4121ff8c13feadf","tid":2005259,"uid":8005,"like":5,"dislike":0,"score":5,"citedBy":1,"replyTime":"2020-05-07T07:58:57.000Z","msg":"點解要用swarm....."},"citedBy":1,"replyTime":"2020-05-07T08:02:53.000Z","msg":"本身成舊野係compose黎，試下可唔可以加幾句野轉成cluster，同埋我冇k8s機<br />\n<br />\n<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2020-05-07T08:19:36.000Z","msg":"Swarm 個cluster 唔係license 至起到，仲麻煩過學走k8s啦<img src=\"/assets/faces/normal/chicken.gif\" class=\"hkgmoji\" />"},"citedBy":0,"replyTime":"2020-05-07T11:55:58.000Z","msg":"唔明，唔係裝左docker打句swarm init就起到咩"},{"pid":"40e68031dbe6230ed28896003141efe7feab9311","tid":2005259,"uid":28563,"like":0,"dislike":0,"score":0,"quote":{"pid":"98dbed2977ab7c2facf2ccf49d1089fa924b6877","tid":2005259,"uid":21699,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-07T11:55:46.000Z","msg":"docker swarm咁快就變左夕陽技術<img src=\"/assets/faces/normal/frown.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2020-05-07T11:59:19.000Z","msg":"因為用既原因得冇k8s<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><br />\n冇clusterip冇pvc冇得唔同host轉移volume&hellip;"},{"pid":"8e8072153948e6c93abca9737c26f41c3687c743","tid":2005259,"uid":8005,"like":0,"dislike":0,"score":0,"quote":{"pid":"40e68031dbe6230ed28896003141efe7feab9311","tid":2005259,"uid":28563,"like":0,"dislike":0,"score":0,"quote":{"pid":"98dbed2977ab7c2facf2ccf49d1089fa924b6877","tid":2005259,"uid":21699,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-07T11:55:46.000Z","msg":"docker swarm咁快就變左夕陽技術<img src=\"/assets/faces/normal/frown.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2020-05-07T11:59:19.000Z","msg":"因為用既原因得冇k8s<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><br />\n冇clusterip冇pvc冇得唔同host轉移volume&hellip;"},"citedBy":1,"replyTime":"2020-05-07T12:20:31.000Z","msg":"依家係2020 可以用local disk做pv啦<img src=\"/assets/faces/normal/bye.gif\" class=\"hkgmoji\" />"},{"pid":"44295bf06d6cc6e08d69600e02bcaae9219525cd","tid":2005259,"uid":28563,"like":0,"dislike":0,"score":0,"quote":{"pid":"8e8072153948e6c93abca9737c26f41c3687c743","tid":2005259,"uid":8005,"like":0,"dislike":0,"score":0,"quote":{"pid":"40e68031dbe6230ed28896003141efe7feab9311","tid":2005259,"uid":28563,"like":0,"dislike":0,"score":0,"quote":{"pid":"98dbed2977ab7c2facf2ccf49d1089fa924b6877","tid":2005259,"uid":21699,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-07T11:55:46.000Z","msg":"docker swarm咁快就變左夕陽技術<img src=\"/assets/faces/normal/frown.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2020-05-07T11:59:19.000Z","msg":"因為用既原因得冇k8s<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><br />\n冇clusterip冇pvc冇得唔同host轉移volume&hellip;"},"citedBy":1,"replyTime":"2020-05-07T12:20:31.000Z","msg":"依家係2020 可以用local disk做pv啦<img src=\"/assets/faces/normal/bye.gif\" class=\"hkgmoji\" />"},"citedBy":0,"replyTime":"2020-05-07T12:30:19.000Z","msg":"不了"},{"pid":"46faa60109974489f5861d30f25f646d3d0290a9","tid":2005259,"uid":2357,"like":0,"dislike":0,"score":0,"citedBy":3,"replyTime":"2020-05-07T12:32:09.000Z","msg":"diu la sing docker 好撚慘，唔夠巨型公司砌"},{"pid":"6455cd17c02d2dbde7cd6c56a842b15057df3d16","tid":2005259,"uid":8005,"like":0,"dislike":0,"score":0,"quote":{"pid":"46faa60109974489f5861d30f25f646d3d0290a9","tid":2005259,"uid":2357,"like":0,"dislike":0,"score":0,"citedBy":3,"replyTime":"2020-05-07T12:32:09.000Z","msg":"diu la sing docker 好撚慘，唔夠巨型公司砌"},"citedBy":0,"replyTime":"2020-05-07T12:35:57.000Z","msg":"佢等收購無人買，做個runtime 變左condom<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><br />\n<br />\n佢肯swarm 比大家就咁試，一早發左啦"},{"pid":"64721c9e74083fcea4017f81d31b5f33fde2276a","tid":2005259,"uid":210998,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-07T12:41:49.000Z","msg":"其實就係將所有野炒埋一碟？有咩use case?"},{"pid":"34d43cef6f417d70c2f6309c7067311e0ddb47a8","tid":2005259,"uid":104138,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-07T12:44:27.000Z","msg":"宜家唔用docker 會用咩？"},{"pid":"b06f7b0fd85a2e9d5b5600aeaf48be6b5e0eddd7","tid":2005259,"uid":28563,"like":0,"dislike":0,"score":0,"quote":{"pid":"64721c9e74083fcea4017f81d31b5f33fde2276a","tid":2005259,"uid":210998,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-07T12:41:49.000Z","msg":"其實就係將所有野炒埋一碟？有咩use case?"},"citedBy":0,"replyTime":"2020-05-07T13:27:14.000Z","msg":"多囉&hellip;"},{"pid":"bc287247bbdcf6d1995266b24755767ff2d5e019","tid":2005259,"uid":8005,"like":0,"dislike":0,"score":0,"quote":{"pid":"34d43cef6f417d70c2f6309c7067311e0ddb47a8","tid":2005259,"uid":104138,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-07T12:44:27.000Z","msg":"宜家唔用docker 會用咩？"},"citedBy":1,"replyTime":"2020-05-07T13:30:41.000Z","msg":"docker 係container runtime, alternative 可以係containerd <br />\n如果講container orchestration system, swarm, k8s, openshift..... 下省1000字....."},{"pid":"07ee50fb53b0a2246ebca73b250f16eff7109ba7","tid":2005259,"uid":21699,"like":0,"dislike":0,"score":0,"quote":{"pid":"46faa60109974489f5861d30f25f646d3d0290a9","tid":2005259,"uid":2357,"like":0,"dislike":0,"score":0,"citedBy":3,"replyTime":"2020-05-07T12:32:09.000Z","msg":"diu la sing docker 好撚慘，唔夠巨型公司砌"},"citedBy":0,"replyTime":"2020-05-07T14:38:27.000Z","msg":"it真係一個殘酷嘅戰場"},{"pid":"acec66a4691a46a75cff56a4a0d7190c048823cb","tid":2005259,"uid":165891,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-07T14:48:34.000Z","msg":"時代的眼淚.. 都係背靠大公司好..<br />\n不如搞 aws architect/ Azure architect"},{"pid":"6d6b813098019beafc38bde2d296023ac6fe49ef","tid":2005259,"uid":28563,"like":0,"dislike":0,"score":0,"quote":{"pid":"acec66a4691a46a75cff56a4a0d7190c048823cb","tid":2005259,"uid":165891,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-07T14:48:34.000Z","msg":"時代的眼淚.. 都係背靠大公司好..<br />\n不如搞 aws architect/ Azure architect"},"citedBy":0,"replyTime":"2020-05-07T15:06:00.000Z","msg":"唔想比錢大公司，自然有套咁冇好但平超多既solution<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"},{"pid":"25865ad06d645df2967ecd80c2bfeaf82823bf38","tid":2005259,"uid":41458,"like":0,"dislike":0,"score":0,"citedBy":2,"replyTime":"2020-05-07T15:10:33.000Z","msg":"用k8s啦, 仲swarm"},{"pid":"b478ca48f12b9637a5cafe0ac7e9fe3aefe7c44b","tid":2005259,"uid":28563,"like":0,"dislike":1,"score":-1,"quote":{"pid":"25865ad06d645df2967ecd80c2bfeaf82823bf38","tid":2005259,"uid":41458,"like":0,"dislike":0,"score":0,"citedBy":2,"replyTime":"2020-05-07T15:10:33.000Z","msg":"用k8s啦, 仲swarm"},"citedBy":0,"replyTime":"2020-05-07T15:46:47.000Z","msg":"咪講左夕陽技術<img src=\"/assets/faces/normal/frown.gif\" class=\"hkgmoji\" />"},{"pid":"f5b2324a936cc14245b3470b012b5bfabd3d3aea","tid":2005259,"uid":255967,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2020-05-07T16:54:58.000Z","msg":"dbadmin 用tableplus 啦<br />\nredis postgres 都岩用"},{"pid":"5dda8e5307980edd1784fc33804426adcba279ef","tid":2005259,"uid":255967,"like":0,"dislike":0,"score":0,"quote":{"pid":"bc287247bbdcf6d1995266b24755767ff2d5e019","tid":2005259,"uid":8005,"like":0,"dislike":0,"score":0,"quote":{"pid":"34d43cef6f417d70c2f6309c7067311e0ddb47a8","tid":2005259,"uid":104138,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-07T12:44:27.000Z","msg":"宜家唔用docker 會用咩？"},"citedBy":1,"replyTime":"2020-05-07T13:30:41.000Z","msg":"docker 係container runtime, alternative 可以係containerd <br />\n如果講container orchestration system, swarm, k8s, openshift..... 下省1000字....."},"citedBy":1,"replyTime":"2020-05-07T17:01:07.000Z","msg":"<img src=\"/assets/faces/normal/biggrin.gif\" class=\"hkgmoji\" />"},{"pid":"96eccc3b0405263b90e44a35e2c48260e4d3db42","tid":2005259,"uid":8005,"like":1,"dislike":0,"score":1,"quote":{"pid":"5dda8e5307980edd1784fc33804426adcba279ef","tid":2005259,"uid":255967,"like":0,"dislike":0,"score":0,"quote":{"pid":"bc287247bbdcf6d1995266b24755767ff2d5e019","tid":2005259,"uid":8005,"like":0,"dislike":0,"score":0,"quote":{"pid":"34d43cef6f417d70c2f6309c7067311e0ddb47a8","tid":2005259,"uid":104138,"like":0,"dislike":0,"score":0,"citedBy":1,"replyTime":"2020-05-07T12:44:27.000Z","msg":"宜家唔用docker 會用咩？"},"citedBy":1,"replyTime":"2020-05-07T13:30:41.000Z","msg":"docker 係container runtime, alternative 可以係containerd <br />\n如果講container orchestration system, swarm, k8s, openshift..... 下省1000字....."},"citedBy":1,"replyTime":"2020-05-07T17:01:07.000Z","msg":"<img src=\"/assets/faces/normal/biggrin.gif\" class=\"hkgmoji\" />"},"citedBy":0,"replyTime":"2020-05-07T17:14:50.000Z","msg":"<img src=\"/assets/faces/normal/z.gif\" class=\"hkgmoji\" />"}]}