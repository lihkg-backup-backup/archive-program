{"tid":258215,"cid":26,"subCid":0,"title":"SambaCry 正式登錄Linux","createTime":"2017-05-26T02:02:28.000Z","updateTime":"2017-05-31T14:02:40.000Z","uid":1886,"like":1,"dislike":0,"uniUserReply":0,"replies":[{"pid":"b60d405c996d680ea910a03340f48d777478ceef","tid":258215,"uid":1886,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-26T02:02:28.000Z","msg":"<div style=\"text-align: center;\"><img src=\"https://2.bp.blogspot.com/-IfU802XsX6s/WSaDGq07jCI/AAAAAAAAs1w/qr8caqavXxccixsBzn9XPPsIm27uRro4QCLcB/s1600/samba-remote-code-exploit.png\" data-thumbnail-src=\"https://i.lih.kg/thumbnail?u=https%3A%2F%2F2.bp.blogspot.com%2F-IfU802XsX6s%2FWSaDGq07jCI%2FAAAAAAAAs1w%2Fqr8caqavXxccixsBzn9XPPsIm27uRro4QCLcB%2Fs1600%2Fsamba-remote-code-exploit.png&h=55f8e8d6&s={SIZE}\" /></div><br />\n<br />\n今次到 #Samba (Linux 上嘅 SMB share server) 有遙距攻擊漏洞，Exploit code 已流通，不禁令人擔心類似 #WannaCry 同 #EternalBlue 相關嘅攻擊今次會針對 Linux-based 系統。<span style=\"color: red;\">如果攻擊成功，除咗有機會中 Ransomware 外，仲可能偷或修改到部機入面嘅資料<img src=\"/assets/faces/normal/bye.gif\" class=\"hkgmoji\" /> 。</span><br />\n<br />\n<a href=\"https://www.facebook.com/InfoSecOnGround/posts/716393495206994\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fwww.facebook.com%2FInfoSecOnGround%2Fposts%2F716393495206994&d=JOznHiMcqeBMxdp32aSgw7r9WXPazFMcT8p8rn878U0%3D&h=6c63ccee\" target=\"_blank\">https://www.facebook.com/InfoSecOnGround/posts/716393495206994</a><br />\n<br />\n#NAS 高危！<br />\n<br />\nBtw 跟據小編尋晚收集嘅資料，攻擊條件可能包括有 writable share / pipe，未必係人都得，但值得大家留意一下。<br />\n<br />\n詳情：<a href=\"https://www.samba.org/samba/security/CVE-2017-7494.html\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fwww.samba.org%2Fsamba%2Fsecurity%2FCVE-2017-7494.html&d=JOznHiMcqeBMxdp32aSgw7r9WXPazFMcT8p8rn878U0%3D&h=8cc68661\" target=\"_blank\">https://www.samba.org/samba/security/CVE-2017-7494.html</a>"},{"pid":"46e13a1515428b0f53053eb8fea74e915394a1fa","tid":258215,"uid":10009,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-26T02:21:41.000Z","msg":"有patch未<img src=\"/assets/faces/lomoji/16.png\" class=\"hkgmoji\" />"},{"pid":"d72556b5d4ac769b28039a3ce0322f57153314da","tid":258215,"uid":33835,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-26T02:26:50.000Z","msg":"<blockquote>有patch未<img src=\"/assets/faces/lomoji/16.png\" class=\"hkgmoji\" /></blockquote><br />\n有"},{"pid":"44d9bcd2e6cbf414a9ebd44ae67274a9fed46517","tid":258215,"uid":1518,"like":2,"dislike":0,"score":2,"citedBy":0,"replyTime":"2017-05-26T05:12:18.000Z","msg":"MrA:用家問題"},{"pid":"c24ac3b0f8b7a3a7be006fee49c7df557655fbde","tid":258215,"uid":34154,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-26T06:34:57.000Z","msg":"<blockquote>MrA:用家問題</blockquote><br />\n<img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" />"},{"pid":"eab8a2b2a17b88ec40306a905c28781682db45f1","tid":258215,"uid":28563,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-26T07:22:15.000Z","msg":"Mitigation:<br />\n<br />\nAny of the following:<br />\n<br />\n1. SELinux is enabled by default and our default policy prevents loading of modules from outside<br />\n   of samba's module directories and therefore blocks the exploit<br />\n<br />\n2. Mount the filessytem which is used by samba for its writeable share, using &quot;noexec&quot; option.<br />\n<br />\n3. Add the parameter:<br />\n<br />\n    nt pipe support = no<br />\n<br />\n    to the [global] section of your smb.conf and restart smbd. This prevents clients from accessing<br />\n    any named pipe endpoints. Note this can disable some expected functionality for Windows clients."},{"pid":"bb582ad950473f6d5154832d62d5dc7caf4b563b","tid":258215,"uid":28563,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-26T07:26:04.000Z","msg":"<a href=\"https://security.archlinux.org/package/samba\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fsecurity.archlinux.org%2Fpackage%2Fsamba&d=JOznHiMcqeBMxdp32aSgw7r9WXPazFMcT8p8rn878U0%3D&h=0adf9ad0\" target=\"_blank\">https://security.archlinux.org/package/samba</a>"},{"pid":"2ad8442401e0d0068d5ebb1eaf9fc76414390aab","tid":258215,"uid":18912,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-26T08:14:57.000Z","msg":"🤢"},{"pid":"a41a1f19fb0a560cd1b500c5c4cf44012159b901","tid":258215,"uid":73231,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-26T15:17:22.000Z","msg":"NAS 啲 vendor 升級密唔密<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /> <br />\n用緊西部數碼<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" />"},{"pid":"48fbf3b379957fee2fa2c0c7dfb89ec5989faa55","tid":258215,"uid":105553,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-26T16:48:15.000Z","msg":"<blockquote>NAS 啲 vendor 升級密唔密<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /> <br />\n用緊西部數碼<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /></blockquote><br />\n你部NAS係真IP定響firewall後面？firewall有無Samba port forwarding？<br />\n如果響firewall 後，firewall有無forwarding應該安全。不過我識有人屋企部NAS駁出街睇相，但無知到係乜protocol。我自己部router行Linux但一年以上無得update，不過我Samba無開到。"},{"pid":"c47276cd2d248db5983a30b6d06d4a474b916971","tid":258215,"uid":73231,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-26T17:03:45.000Z","msg":"<blockquote><blockquote>NAS 啲 vendor 升級密唔密<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /> <br />\n用緊西部數碼<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /></blockquote><br />\n你部NAS係真IP定響firewall後面？firewall有無Samba port forwarding？<br />\n如果響firewall 後，firewall有無forwarding應該安全。不過我識有人屋企部NAS駁出街睇相，但無知到係乜protocol。我自己部router行Linux但一年以上無得update，不過我Samba無開到。</blockquote><br />\nbehind firewall, through NAT i think. not sure what ports they use, but i occasionally use the included app to access files there. I probably have uPNP turned on on the router"},{"pid":"6975164c1364b79de74267e9ea836523b249d35a","tid":258215,"uid":105553,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-26T17:53:33.000Z","msg":"<blockquote><blockquote><blockquote>NAS 啲 vendor 升級密唔密<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /> <br />\n用緊西部數碼<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /></blockquote><br />\n你部NAS係真IP定響firewall後面？firewall有無Samba port forwarding？<br />\n如果響firewall 後，firewall有無forwarding應該安全。不過我識有人屋企部NAS駁出街睇相，但無知到係乜protocol。我自己部router行Linux但一年以上無得update，不過我Samba無開到。</blockquote><br />\nbehind firewall, through NAT i think. not sure what ports they use, but i occasionally use the included app to access files there. I probably have uPNP turned on on the router</blockquote><br />\n<br />\nRun this test at home behind firewall.<br />\n<br />\n<a href=\"http://www.t1shopper.com/tools/port-scan/\" data-sr-url=\"https://r.lihkg.com/link?u=http%3A%2F%2Fwww.t1shopper.com%2Ftools%2Fport-scan%2F&d=JOznHiMcqeBMxdp32aSgw7r9WXPazFMcT8p8rn878U0%3D&h=32733260\" target=\"_blank\">http://www.t1shopper.com/tools/port-scan/</a>"},{"pid":"cb69431db352bd656dc09cb22f82f490a2e9134a","tid":258215,"uid":55597,"like":0,"dislike":1,"score":-1,"citedBy":0,"replyTime":"2017-05-26T17:57:36.000Z","msg":"真係好撚驚"},{"pid":"635b1d9b2afc9de3ba880e3a1a5d2927ad9a53e7","tid":258215,"uid":35971,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-27T04:46:17.000Z","msg":"用Router vpn, 有個setting係要enable samba, <br />\n係唔係一樣受影響<img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" />"},{"pid":"cbe16974ce77366ce00d44e172ca61459a1c6cd1","tid":258215,"uid":55597,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-27T05:40:24.000Z","msg":"<blockquote>Mitigation:<br />\n<br />\nAny of the following:<br />\n<br />\n1. SELinux is enabled by default and our default policy prevents loading of modules from outside<br />\n   of samba's module directories and therefore blocks the exploit<br />\n<br />\n2. Mount the filessytem which is used by samba for its writeable share, using &quot;noexec&quot; option.<br />\n<br />\n3. Add the parameter:<br />\n<br />\n    nt pipe support = no<br />\n<br />\n    to the [global] section of your smb.conf and restart smbd. This prevents clients from accessing<br />\n    any named pipe endpoints. Note this can disable some expected functionality for Windows clients.</blockquote><br />\n即係 sambacry 係 windows client 導致 ?"},{"pid":"1861cba8b852080b8a169eba322d8c6b7a3a4b79","tid":258215,"uid":11001,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-27T06:46:33.000Z","msg":"<blockquote><blockquote>Mitigation:<br />\n<br />\nAny of the following:<br />\n<br />\n1. SELinux is enabled by default and our default policy prevents loading of modules from outside<br />\n   of samba's module directories and therefore blocks the exploit<br />\n<br />\n2. Mount the filessytem which is used by samba for its writeable share, using &quot;noexec&quot; option.<br />\n<br />\n3. Add the parameter:<br />\n<br />\n    nt pipe support = no<br />\n<br />\n    to the [global] section of your smb.conf and restart smbd. This prevents clients from accessing<br />\n    any named pipe endpoints. Note this can disable some expected functionality for Windows clients.</blockquote><br />\n即係 sambacry 係 windows client 導致 ?</blockquote><br />\n...... <img src=\"/assets/faces/normal/clown.gif\" class=\"hkgmoji\" /> <br />\n<br />\n唔識英文定唔知咩係SMB <img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" />"},{"pid":"8e34fccbed008339cbdaee643e69df30b43daad7","tid":258215,"uid":53026,"like":1,"dislike":0,"score":1,"citedBy":0,"replyTime":"2017-05-27T08:35:03.000Z","msg":"唔怕，不可同WannyCry相提並論。<br />\n<br />\nＷindows好多人用老翻，焗住要停左windows update<br />\n<br />\nLinux完全免費，且有相關社羣強大支援，就算有漏洞都可以堂而煌之討論及迅速修補<img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/agree.gif\" class=\"hkgmoji\" />"},{"pid":"833148ad39104fc72d47ceeb9d05acd7900d49de","tid":258215,"uid":55597,"like":0,"dislike":2,"score":-2,"citedBy":0,"replyTime":"2017-05-27T09:52:20.000Z","msg":"<blockquote><blockquote><blockquote>Mitigation:<br />\n<br />\nAny of the following:<br />\n<br />\n1. SELinux is enabled by default and our default policy prevents loading of modules from outside<br />\n   of samba's module directories and therefore blocks the exploit<br />\n<br />\n2. Mount the filessytem which is used by samba for its writeable share, using &quot;noexec&quot; option.<br />\n<br />\n3. Add the parameter:<br />\n<br />\n    nt pipe support = no<br />\n<br />\n    to the [global] section of your smb.conf and restart smbd. This prevents clients from accessing<br />\n    any named pipe endpoints. Note this can disable some expected functionality for Windows clients.</blockquote><br />\n即係 sambacry 係 windows client 導致 ?</blockquote><br />\n...... <img src=\"/assets/faces/normal/clown.gif\" class=\"hkgmoji\" /> <br />\n<br />\n唔識英文定唔知咩係SMB <img src=\"/assets/faces/normal/wonder.gif\" class=\"hkgmoji\" /></blockquote><br />\n係呀，唔識呀，解黎聽下"},{"pid":"22dc68ee4b1c5be17b2cd7be22125a78af099ce7","tid":258215,"uid":6556,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-27T12:17:05.000Z","msg":"裝 Linux <br />\n<br />\n<br />\n<br />\n<br />\n<br />\n都要 update 㗎 <img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"},{"pid":"2c63644575319b65a34ccf679fd6c0153b2a719c","tid":258215,"uid":106,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-27T12:19:13.000Z","msg":"大把人server 放係度起完就乜都唔理<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/good.gif\" class=\"hkgmoji\" />"},{"pid":"09462de327d587c33d2d9923d9af80f0808545c9","tid":258215,"uid":73231,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-27T16:33:44.000Z","msg":"<blockquote><blockquote><blockquote><blockquote>NAS 啲 vendor 升級密唔密<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /> <br />\n用緊西部數碼<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /></blockquote><br />\n你部NAS係真IP定響firewall後面？firewall有無Samba port forwarding？<br />\n如果響firewall 後，firewall有無forwarding應該安全。不過我識有人屋企部NAS駁出街睇相，但無知到係乜protocol。我自己部router行Linux但一年以上無得update，不過我Samba無開到。</blockquote><br />\nbehind firewall, through NAT i think. not sure what ports they use, but i occasionally use the included app to access files there. I probably have uPNP turned on on the router</blockquote><br />\n<br />\nRun this test at home behind firewall.<br />\n<br />\n<a href=\"http://www.t1shopper.com/tools/port-scan/\" data-sr-url=\"https://r.lihkg.com/link?u=http%3A%2F%2Fwww.t1shopper.com%2Ftools%2Fport-scan%2F&d=JOznHiMcqeBMxdp32aSgw7r9WXPazFMcT8p8rn878U0%3D&h=32733260\" target=\"_blank\">http://www.t1shopper.com/tools/port-scan/</a></blockquote><br />\n冇 common ports 開住<br />\n但其實屋企有4 5 樣 smart home 嘢用 app through cloud access. 中間 個 router upnp 唔肯定有冇開乜 port<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" />"},{"pid":"a3292ffbd4a971febbb835d20717b717b7b2cefc","tid":258215,"uid":55725,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-27T20:06:46.000Z","msg":"本大師一早講左SELinux大撚晒<br />\n有種咪HACK入黎囉<br />\n班仆街推你班死蠢用既UBUNTU係無SELinux DEFAULT ACTIVATED<br />\n仲有好多野要用到首先要DISABLE SELinux<br />\n你地仲敢唔敢隨便DISABLE?<br />\n快啲HACK入黎呀DLLM 5毛屎尿屁<br />\n信我者必得救<img src=\"/assets/faces/normal/slick.gif\" class=\"hkgmoji\" /> <br />\n<img src=\"https://www.drupalwatchdog.com/sites/default/files/images/web/selinux-penguin-new_medium.png\" data-thumbnail-src=\"https://i.lih.kg/thumbnail?u=https%3A%2F%2Fwww.drupalwatchdog.com%2Fsites%2Fdefault%2Ffiles%2Fimages%2Fweb%2Fselinux-penguin-new_medium.png&h=188f00c5&s={SIZE}\" />"},{"pid":"376ebaea570c5009693648bd0fc1bb5001fef512","tid":258215,"uid":37489,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-27T23:13:02.000Z","msg":"On9問句 mac會唔會有事"},{"pid":"97acff6eb7c35eb4d48c19f087fc9bb91adbabd9","tid":258215,"uid":20867,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-28T00:52:58.000Z","msg":"<blockquote>On9問句 mac會唔會有事</blockquote><br />\n有Time Machine米有事都唔駛驚lor<img src=\"/assets/faces/normal/biggrin.gif\" class=\"hkgmoji\" />"},{"pid":"1662317e2b5f268ccbd9d612b8294ba9862cba2c","tid":258215,"uid":1518,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-05-28T06:11:38.000Z","msg":"MrA:一切都係window嘅錯"}]}