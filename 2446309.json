{"tid":2446309,"cid":26,"subCid":0,"title":"https封包請教","createTime":"2021-03-14T10:58:36.000Z","updateTime":"2021-03-15T04:31:27.000Z","uid":70883,"like":1,"dislike":11,"uniUserReply":9,"replies":[{"pid":"7d793c02f590da360ceb53d09448246bf9033c99","tid":2446309,"uid":70883,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2021-03-14T10:58:36.000Z","msg":"某d原因我平時用開charles呢個軟件，同時發送1000個https封包 (concurrent request)，每個size 1KB左右，包含header﹑json body等。<br />\n<br />\n而我其實想所有封包發送既誤差時間(latency)，要小於20ms<br />\n<br />\n但問題係我發現charles呢個軟件有缺憾，即使我cpu夠力，但個軟件唔夠力，導致執行大量封包發送命令既時候有延遲，(因為呢個過程涉及複製或製造大量封包)。<br />\n導致唔能夠真正做到concurrency，時間誤差太大。<br />\n<br />\n而網絡傳遞封包既過程係好流暢的，因為1000個封包加埋純粹1MB左右。<br />\n<br />\n所以想請教下，有冇其他軟件解決到呢個問題。<br />\n<br />\n例如係某個軟件可以先攔截哂所有執行好既封包，然後解除攔截功能之後，就自動同時間發送所有封包。<br />\n<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/hoho.gif\" class=\"hkgmoji\" />"},{"pid":"4fb106e6a8c21d77772cda99cac4f560c47fac4d","tid":2446309,"uid":9248,"like":8,"dislike":3,"score":5,"citedBy":1,"replyTime":"2021-03-14T12:35:54.000Z","msg":"封包 大陸仔<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /><br />\n<br />\n20ms send 1000條 request 仲要有 payload 普通電腦應該無咩可能<br />\n<br />\nBtw, 最簡單應該係爆1000條 curl process 一齊行 <br />\n<br />\ncurl <a href=\"https://google.com\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fgoogle.com&d=wSR7%2FpLLUFbraZn9MQiPfNkum%2F%2B3HP0Ta45uqRfUpIg%3D&h=4372d8dd\" data-auto-link target=\"_blank\">https://google.com</a> &amp; curl <a href=\"https://google.com\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fgoogle.com&d=wSR7%2FpLLUFbraZn9MQiPfNkum%2F%2B3HP0Ta45uqRfUpIg%3D&h=4372d8dd\" data-auto-link target=\"_blank\">https://google.com</a> &amp;.....<br />\n有需要就再做 batching <br />\n<br />\n利申 9up"},{"pid":"20d320efc37f83444ab936a376753a6f0b05e8fa","tid":2446309,"uid":101554,"like":6,"dislike":1,"score":5,"quote":{"pid":"4fb106e6a8c21d77772cda99cac4f560c47fac4d","tid":2446309,"uid":9248,"like":8,"dislike":3,"score":5,"citedBy":1,"replyTime":"2021-03-14T12:35:54.000Z","msg":"封包 大陸仔<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /><br />\n<br />\n20ms send 1000條 request 仲要有 payload 普通電腦應該無咩可能<br />\n<br />\nBtw, 最簡單應該係爆1000條 curl process 一齊行 <br />\n<br />\ncurl <a href=\"https://google.com\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fgoogle.com&d=wSR7%2FpLLUFbraZn9MQiPfNkum%2F%2B3HP0Ta45uqRfUpIg%3D&h=4372d8dd\" data-auto-link target=\"_blank\">https://google.com</a> &amp; curl <a href=\"https://google.com\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fgoogle.com&d=wSR7%2FpLLUFbraZn9MQiPfNkum%2F%2B3HP0Ta45uqRfUpIg%3D&h=4372d8dd\" data-auto-link target=\"_blank\">https://google.com</a> &amp;.....<br />\n有需要就再做 batching <br />\n<br />\n利申 9up"},"citedBy":1,"replyTime":"2021-03-14T12:37:45.000Z","msg":"咁中文係咩?"},{"pid":"6bcd36fc68b719076f59eae3392aa6098740d0cb","tid":2446309,"uid":67527,"like":3,"dislike":0,"score":3,"citedBy":1,"replyTime":"2021-03-14T12:44:09.000Z","msg":"唔夠context，1000個https requests係向同一個host send?定點解<br />\n點解一定要20ms以內？如果唔同host，有個host喺美國已經直接200ms ping<br />\n<br />\n唔夠context答你唔到"},{"pid":"0213d0c5f62388a35864562f5411f2bb0fff9939","tid":2446309,"uid":70883,"like":0,"dislike":5,"score":-5,"quote":{"pid":"6bcd36fc68b719076f59eae3392aa6098740d0cb","tid":2446309,"uid":67527,"like":3,"dislike":0,"score":3,"citedBy":1,"replyTime":"2021-03-14T12:44:09.000Z","msg":"唔夠context，1000個https requests係向同一個host send?定點解<br />\n點解一定要20ms以內？如果唔同host，有個host喺美國已經直接200ms ping<br />\n<br />\n唔夠context答你唔到"},"citedBy":2,"replyTime":"2021-03-14T13:03:31.000Z","msg":"sorry補充返<br />\n<br />\n1000個係send去同一個host的<br />\n20ms以內既原因其實係玩遊戲，某d漏洞 (唔係犯法野)<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><br />\n<br />\n我宜家既情況係:<br />\n如果我同時send 200個，係可以有80個做到20ms內，<br />\n；如果我send 400個，一樣係80個左右<br />\n；但如果我send 1000個，反而得40個成功。<br />\n<br />\n另外再補充返，我肯定唔關server拒絕request事，係自己問題。<br />\n同埋我send1000個既時候，cpu由1%變40%使用率，但個軟件就稍為lag左。<br />\n<br />\n所以我覺得係個charles軟件唔夠力，感覺上有其他方法可以完美咁send 1000個，而起碼有400個成功20ms內<br />\n<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" />"},{"pid":"9024d863c52c4b60ba6f40eb4d72307057525cf1","tid":2446309,"uid":70883,"like":0,"dislike":1,"score":-1,"citedBy":0,"replyTime":"2021-03-14T13:47:58.000Z","msg":"再補充返:<br />\n1. 果1000個packet，每個內容係完全相同。<br />\n2. 我指的20ms，意思係指誤差唔超過20ms，<br />\n比如:<br />\nrequest 1 ---&gt; latency = 308ms <br />\nrequest 2----&gt; latency = 310ms<br />\nrequest 3----&gt; latency = 300ms  (呢個最早送達，作為基準)<br />\nrequest 4----&gt; latency = 305ms<br />\n.<br />\n.<br />\n.<br />\nrequest 80----&gt;latency=320ms (誤差值邊緣)<br />\n.<br />\n.<br />\n.<br />\nrequest 1000-&gt;latency=900ms (超過理想誤差值)"},{"pid":"d77df31c687ffe78c8a9a307ee3e28ee4982de79","tid":2446309,"uid":66242,"like":10,"dislike":4,"score":6,"quote":{"pid":"20d320efc37f83444ab936a376753a6f0b05e8fa","tid":2446309,"uid":101554,"like":6,"dislike":1,"score":5,"quote":{"pid":"4fb106e6a8c21d77772cda99cac4f560c47fac4d","tid":2446309,"uid":9248,"like":8,"dislike":3,"score":5,"citedBy":1,"replyTime":"2021-03-14T12:35:54.000Z","msg":"封包 大陸仔<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /><br />\n<br />\n20ms send 1000條 request 仲要有 payload 普通電腦應該無咩可能<br />\n<br />\nBtw, 最簡單應該係爆1000條 curl process 一齊行 <br />\n<br />\ncurl <a href=\"https://google.com\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fgoogle.com&d=wSR7%2FpLLUFbraZn9MQiPfNkum%2F%2B3HP0Ta45uqRfUpIg%3D&h=4372d8dd\" data-auto-link target=\"_blank\">https://google.com</a> &amp; curl <a href=\"https://google.com\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fgoogle.com&d=wSR7%2FpLLUFbraZn9MQiPfNkum%2F%2B3HP0Ta45uqRfUpIg%3D&h=4372d8dd\" data-auto-link target=\"_blank\">https://google.com</a> &amp;.....<br />\n有需要就再做 batching <br />\n<br />\n利申 9up"},"citedBy":1,"replyTime":"2021-03-14T12:37:45.000Z","msg":"咁中文係咩?"},"citedBy":1,"replyTime":"2021-03-14T14:37:08.000Z","msg":"正常我識嘅香港人就會叫番做正常嘅原文，packet<br />\n無啦啦無必要夾硬譯個中文出嚟<br />\n除非你係中文中小學教師<br />\nFacebook instagram whatsapp iPhone lihkg 正式中文係咩?<br />\n我諗正常人無需要知亦唔需要用<br />\n除非要應付香港考試嘅學生"},{"pid":"d05473a586a365c6d091ed8bfca5428b98833e30","tid":2446309,"uid":23953,"like":1,"dislike":0,"score":1,"quote":{"pid":"0213d0c5f62388a35864562f5411f2bb0fff9939","tid":2446309,"uid":70883,"like":0,"dislike":5,"score":-5,"quote":{"pid":"6bcd36fc68b719076f59eae3392aa6098740d0cb","tid":2446309,"uid":67527,"like":3,"dislike":0,"score":3,"citedBy":1,"replyTime":"2021-03-14T12:44:09.000Z","msg":"唔夠context，1000個https requests係向同一個host send?定點解<br />\n點解一定要20ms以內？如果唔同host，有個host喺美國已經直接200ms ping<br />\n<br />\n唔夠context答你唔到"},"citedBy":2,"replyTime":"2021-03-14T13:03:31.000Z","msg":"sorry補充返<br />\n<br />\n1000個係send去同一個host的<br />\n20ms以內既原因其實係玩遊戲，某d漏洞 (唔係犯法野)<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><br />\n<br />\n我宜家既情況係:<br />\n如果我同時send 200個，係可以有80個做到20ms內，<br />\n；如果我send 400個，一樣係80個左右<br />\n；但如果我send 1000個，反而得40個成功。<br />\n<br />\n另外再補充返，我肯定唔關server拒絕request事，係自己問題。<br />\n同埋我send1000個既時候，cpu由1%變40%使用率，但個軟件就稍為lag左。<br />\n<br />\n所以我覺得係個charles軟件唔夠力，感覺上有其他方法可以完美咁send 1000個，而起碼有400個成功20ms內<br />\n<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2021-03-14T14:44:27.000Z","msg":"玩咩遊戲要用dos<img src=\"/assets/faces/normal/@.gif\" class=\"hkgmoji\" /><br />\n直接用low orbit ion cannon好過"},{"pid":"b15fbe7a06f85475e721fe3adc14b8d87b8bed09","tid":2446309,"uid":2341,"like":1,"dislike":0,"score":1,"quote":{"pid":"d05473a586a365c6d091ed8bfca5428b98833e30","tid":2446309,"uid":23953,"like":1,"dislike":0,"score":1,"quote":{"pid":"0213d0c5f62388a35864562f5411f2bb0fff9939","tid":2446309,"uid":70883,"like":0,"dislike":5,"score":-5,"quote":{"pid":"6bcd36fc68b719076f59eae3392aa6098740d0cb","tid":2446309,"uid":67527,"like":3,"dislike":0,"score":3,"citedBy":1,"replyTime":"2021-03-14T12:44:09.000Z","msg":"唔夠context，1000個https requests係向同一個host send?定點解<br />\n點解一定要20ms以內？如果唔同host，有個host喺美國已經直接200ms ping<br />\n<br />\n唔夠context答你唔到"},"citedBy":2,"replyTime":"2021-03-14T13:03:31.000Z","msg":"sorry補充返<br />\n<br />\n1000個係send去同一個host的<br />\n20ms以內既原因其實係玩遊戲，某d漏洞 (唔係犯法野)<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><br />\n<br />\n我宜家既情況係:<br />\n如果我同時send 200個，係可以有80個做到20ms內，<br />\n；如果我send 400個，一樣係80個左右<br />\n；但如果我send 1000個，反而得40個成功。<br />\n<br />\n另外再補充返，我肯定唔關server拒絕request事，係自己問題。<br />\n同埋我send1000個既時候，cpu由1%變40%使用率，但個軟件就稍為lag左。<br />\n<br />\n所以我覺得係個charles軟件唔夠力，感覺上有其他方法可以完美咁send 1000個，而起碼有400個成功20ms內<br />\n<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" />"},"citedBy":1,"replyTime":"2021-03-14T14:44:27.000Z","msg":"玩咩遊戲要用dos<img src=\"/assets/faces/normal/@.gif\" class=\"hkgmoji\" /><br />\n直接用low orbit ion cannon好過"},"citedBy":0,"replyTime":"2021-03-14T15:05:00.000Z","msg":"race condition"},{"pid":"7c2f661f502ba95ecb92f0d36f958a8a6bd1049c","tid":2446309,"uid":101554,"like":5,"dislike":4,"score":1,"quote":{"pid":"d77df31c687ffe78c8a9a307ee3e28ee4982de79","tid":2446309,"uid":66242,"like":10,"dislike":4,"score":6,"quote":{"pid":"20d320efc37f83444ab936a376753a6f0b05e8fa","tid":2446309,"uid":101554,"like":6,"dislike":1,"score":5,"quote":{"pid":"4fb106e6a8c21d77772cda99cac4f560c47fac4d","tid":2446309,"uid":9248,"like":8,"dislike":3,"score":5,"citedBy":1,"replyTime":"2021-03-14T12:35:54.000Z","msg":"封包 大陸仔<img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/dead.gif\" class=\"hkgmoji\" /><br />\n<br />\n20ms send 1000條 request 仲要有 payload 普通電腦應該無咩可能<br />\n<br />\nBtw, 最簡單應該係爆1000條 curl process 一齊行 <br />\n<br />\ncurl <a href=\"https://google.com\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fgoogle.com&d=wSR7%2FpLLUFbraZn9MQiPfNkum%2F%2B3HP0Ta45uqRfUpIg%3D&h=4372d8dd\" data-auto-link target=\"_blank\">https://google.com</a> &amp; curl <a href=\"https://google.com\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fgoogle.com&d=wSR7%2FpLLUFbraZn9MQiPfNkum%2F%2B3HP0Ta45uqRfUpIg%3D&h=4372d8dd\" data-auto-link target=\"_blank\">https://google.com</a> &amp;.....<br />\n有需要就再做 batching <br />\n<br />\n利申 9up"},"citedBy":1,"replyTime":"2021-03-14T12:37:45.000Z","msg":"咁中文係咩?"},"citedBy":1,"replyTime":"2021-03-14T14:37:08.000Z","msg":"正常我識嘅香港人就會叫番做正常嘅原文，packet<br />\n無啦啦無必要夾硬譯個中文出嚟<br />\n除非你係中文中小學教師<br />\nFacebook instagram whatsapp iPhone lihkg 正式中文係咩?<br />\n我諗正常人無需要知亦唔需要用<br />\n除非要應付香港考試嘅學生"},"citedBy":1,"replyTime":"2021-03-14T15:52:39.000Z","msg":"咁都要衝出嚟<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><br />\n封包都唔比講台灣手足點撚算 <img src=\"/assets/faces/pig/wail.gif\" class=\"hkgmoji\" />"},{"pid":"75f8d0e2861ab14a1e13f12dfa784cf8698f8044","tid":2446309,"uid":67527,"like":0,"dislike":0,"score":0,"quote":{"pid":"0213d0c5f62388a35864562f5411f2bb0fff9939","tid":2446309,"uid":70883,"like":0,"dislike":5,"score":-5,"quote":{"pid":"6bcd36fc68b719076f59eae3392aa6098740d0cb","tid":2446309,"uid":67527,"like":3,"dislike":0,"score":3,"citedBy":1,"replyTime":"2021-03-14T12:44:09.000Z","msg":"唔夠context，1000個https requests係向同一個host send?定點解<br />\n點解一定要20ms以內？如果唔同host，有個host喺美國已經直接200ms ping<br />\n<br />\n唔夠context答你唔到"},"citedBy":2,"replyTime":"2021-03-14T13:03:31.000Z","msg":"sorry補充返<br />\n<br />\n1000個係send去同一個host的<br />\n20ms以內既原因其實係玩遊戲，某d漏洞 (唔係犯法野)<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><br />\n<br />\n我宜家既情況係:<br />\n如果我同時send 200個，係可以有80個做到20ms內，<br />\n；如果我send 400個，一樣係80個左右<br />\n；但如果我send 1000個，反而得40個成功。<br />\n<br />\n另外再補充返，我肯定唔關server拒絕request事，係自己問題。<br />\n同埋我send1000個既時候，cpu由1%變40%使用率，但個軟件就稍為lag左。<br />\n<br />\n所以我覺得係個charles軟件唔夠力，感覺上有其他方法可以完美咁send 1000個，而起碼有400個成功20ms內<br />\n<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" />"},"citedBy":0,"replyTime":"2021-03-14T16:29:30.000Z","msg":"有好多個原因可能send唔晒/delay唔同，但係用漏洞依家嘢就可能犯法嘅，就算唔係刑事都可能係民事"},{"pid":"96e7cd06d4791c0ab152af4a1fc8c96284a43205","tid":2446309,"uid":5159,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2021-03-15T01:25:22.000Z","msg":"痴線佬<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"},{"pid":"5eea00705128341393dcbe66c2390a82936b2ee2","tid":2446309,"uid":336524,"like":0,"dislike":1,"score":-1,"quote":{"pid":"7c2f661f502ba95ecb92f0d36f958a8a6bd1049c","tid":2446309,"uid":101554,"like":5,"dislike":4,"score":1,"quote":{"pid":"d77df31c687ffe78c8a9a307ee3e28ee4982de79","tid":2446309,"uid":66242,"like":10,"dislike":4,"score":6,"quote":{"pid":"20d320efc37f83444ab936a376753a6f0b05e8fa","tid":2446309,"uid":101554,"like":6,"dislike":1,"score":5,"citedBy":1,"replyTime":"2021-03-14T12:37:45.000Z","msg":"咁中文係咩?"},"citedBy":1,"replyTime":"2021-03-14T14:37:08.000Z","msg":"正常我識嘅香港人就會叫番做正常嘅原文，packet<br />\n無啦啦無必要夾硬譯個中文出嚟<br />\n除非你係中文中小學教師<br />\nFacebook instagram whatsapp iPhone lihkg 正式中文係咩?<br />\n我諗正常人無需要知亦唔需要用<br />\n除非要應付香港考試嘅學生"},"citedBy":1,"replyTime":"2021-03-14T15:52:39.000Z","msg":"咁都要衝出嚟<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><br />\n封包都唔比講台灣手足點撚算 <img src=\"/assets/faces/pig/wail.gif\" class=\"hkgmoji\" />"},"citedBy":0,"replyTime":"2021-03-15T04:31:27.000Z","msg":"好心專有名詞用返英文啦<br />\n台灣佬啲it文成日睇到一頭霧水<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><br />\n不過解返啲專有名詞其實寫得唔錯"}]}