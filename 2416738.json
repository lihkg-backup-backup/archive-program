{"tid":2416738,"cid":5,"subCid":10,"title":"［新彊化］市建局研發員工版「健康碼」 設紅黃綠風險提示 研究加藍芽定位技術","createTime":"2021-02-21T09:47:52.000Z","updateTime":"2021-02-21T10:17:50.000Z","uid":48083,"like":2,"dislike":5,"uniUserReply":5,"replies":[{"pid":"f7693c39c793cde9eaaf270ef538779a54bf73f7","tid":2416738,"uid":48083,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2021-02-21T09:47:52.000Z","msg":"行政總監韋志成今（21日）發表網誌指，局方早於去年10月啟動旺角山東街／地士道街重建項目、進行凍結人口調查時使用初始版「健康碼」程式。團隊經改良程式後，在本月中推出有加強功能的「健康碼」2.0 版本。繼「健康碼」初始版有採用全球定位系統（GPS），新版本更會加入掃描「安心出行」二維碼的功能，讓員工紀錄進出室內場所的資料。<br />\n<br />\n此外，局方亦在新版本程式加入「綠、黃、紅」三色的健康風險提示功能。若員工未曾逗留在高風險地方，並曾透過程式申報陰性病毒檢測結果，程式會顯示為「綠碼」。當程式偵查到員工進入疫廈的20米直徑範圍，屏幕將轉為「黃碼」，員工需向上級報告逗留疫廈的事由。管理層需確定員工並非身處於有確診個案的地點後，才會解除「黃碼」。當員工確診武漢肺炎、並透過程式申報，程式將轉為「紅碼」，及自動通報其部門的所有主管。<br />\n<br />\n韋志成稱，「十分明白職員對個人私隱的重視」，因此新版「健康碼」會將所有定位紀錄改為儲存於職員的手機內，而非市建局的加密數據資料庫。韋志成續說，局方團隊優化程式時，曾要求他們研究加入藍牙定位技術，以提供準確定位，亦更「方便、快捷而可靠」。他說，此功能仍處於研究階段，若能成功研發，他期望能在程式的 3.0 版本應用。<br />\n<br />\n<a href=\"https://www.thestandnews.com/politics/%E6%AD%A6%E6%BC%A2%E8%82%BA%E7%82%8E-%E5%B8%82%E5%BB%BA%E5%B1%80%E7%A0%94%E7%99%BC%E5%93%A1%E5%B7%A5%E7%89%88-%E5%81%A5%E5%BA%B7%E7%A2%BC-%E8%A8%AD%E7%B4%85%E9%BB%83%E7%B6%A0%E9%A2%A8%E9%9A%AA%E6%8F%90%E7%A4%BA-%E7%A0%94%E7%A9%B6%E5%8A%A0%E8%97%8D%E8%8A%BD%E5%AE%9A%E4%BD%8D%E6%8A%80%E8%A1%93/\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fwww.thestandnews.com%2Fpolitics%2F%25E6%25AD%25A6%25E6%25BC%25A2%25E8%2582%25BA%25E7%2582%258E-%25E5%25B8%2582%25E5%25BB%25BA%25E5%25B1%2580%25E7%25A0%2594%25E7%2599%25BC%25E5%2593%25A1%25E5%25B7%25A5%25E7%2589%2588-%25E5%2581%25A5%25E5%25BA%25B7%25E7%25A2%25BC-%25E8%25A8%25AD%25E7%25B4%2585%25E9%25BB%2583%25E7%25B6%25A0%25E9%25A2%25A8%25E9%259A%25AA%25E6%258F%2590%25E7%25A4%25BA-%25E7%25A0%2594%25E7%25A9%25B6%25E5%258A%25A0%25E8%2597%258D%25E8%258A%25BD%25E5%25AE%259A%25E4%25BD%258D%25E6%258A%2580%25E8%25A1%2593%2F&d=0FWZMlR46yIxX%2BJDTULvnfiPq%2FHqG0pMUyXzarzxqBM%3D&h=65cdf61d\" data-ef-url=\"https://embed.lih.kg/frame?u=https%3A%2F%2Fwww.thestandnews.com%2Fpolitics%2F%25E6%25AD%25A6%25E6%25BC%25A2%25E8%2582%25BA%25E7%2582%258E-%25E5%25B8%2582%25E5%25BB%25BA%25E5%25B1%2580%25E7%25A0%2594%25E7%2599%25BC%25E5%2593%25A1%25E5%25B7%25A5%25E7%2589%2588-%25E5%2581%25A5%25E5%25BA%25B7%25E7%25A2%25BC-%25E8%25A8%25AD%25E7%25B4%2585%25E9%25BB%2583%25E7%25B6%25A0%25E9%25A2%25A8%25E9%259A%25AA%25E6%258F%2590%25E7%25A4%25BA-%25E7%25A0%2594%25E7%25A9%25B6%25E5%258A%25A0%25E8%2597%258D%25E8%258A%25BD%25E5%25AE%259A%25E4%25BD%258D%25E6%258A%2580%25E8%25A1%2593%2F&h=304b6a7d\" target=\"_blank\">https://www.thestandnews.com/politics/%E6%AD%A6%E6%BC%A2%E8%82%BA%E7%82%8E-%E5%B8%82%E5%BB%BA%E5%B1%80%E7%A0%94%E7%99%BC%E5%93%A1%E5%B7%A5%E7%89%88-%E5%81%A5%E5%BA%B7%E7%A2%BC-%E8%A8%AD%E7%B4%85%E9%BB%83%E7%B6%A0%E9%A2%A8%E9%9A%AA%E6%8F%90%E7%A4%BA-%E7%A0%94%E7%A9%B6%E5%8A%A0%E8%97%8D%E8%8A%BD%E5%AE%9A%E4%BD%8D%E6%8A%80%E8%A1%93/</a>"},{"pid":"42c3e2db0699697fc7c64b0ac69e87621baace7a","tid":2416738,"uid":48083,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2021-02-21T09:48:52.000Z","msg":"黑鏡觀察：別讓「安心出行」成習慣 寧願登記唔好用App<br />\n<a href=\"https://lih.kg/2405579\" data-auto-link target=\"_blank\">https://lih.kg/2405579</a><br />\n- 分享自 LIHKG 討論區<br />\n<br />\n所謂加密<br />\n<br />\n程式的「加密」方法 (generateCheckInRecord)，是先將以下資料併為一字串（暫稱 dataString）：<br />\n<br />\n隨機 8 位字串<br />\n8 位 venueId<br />\n8 位 groupId (若沒有，用 00000000 (NO_GROUP) 代替)<br />\n13 位 inTs (轉為字串)<br />\n13 位 outTs<br />\nmeta (長度不限)，即包括上述 venueName 內的地方資料<br />\n再用以下方法產生 16-byte Key (128 bit)：<br />\n<br />\n將 inTs 除以 60000 成為分鐘單位，僅保留整數部份 (keyInterval)<br />\n將 keyInterval 轉為字串，使用 HKDF (HMAC-based Extract-and-Expand Key Derivation Function)（見 futoin-hkdf 程式庫）產生 Key，當中指定使用 SHA-256 為 HMAC function，及特定的 info 参數（可在程式內找到），沒有使用 salt 参數。<br />\naesKey = CryptoJS.enc.Hex.parse(<br />\n        hkdf(String(keyInterval), 16 /* 16 bytes */, {<br />\n          salt: null,<br />\n          info: ...,  /* info 参數 */<br />\n          hash: &quot;SHA-256&quot;<br />\n        }).toString('hex'));<br />\n然後利用 CryptoJS.AES 以 key 加密資料字串（當中 Initialization vector (IV) 可在程式內找到），再轉為 base64 encoding。<br />\n<br />\nkeyData = CryptoJS.AES.encrypt(dataString, aesKey, {<br />\n    iv: ... /* HKCT_IV */<br />\n}).ciphertext.toString(CryptoJS.enc.Base64)<br />\n之後，將 keyInterval 及加密的 keyData ，連同 upload flag (false，表示未上載) ，作為出行記錄數據，一併存到資料庫中的 LocationHistory table。<br />\n<br />\n以上就是政府不斷強調的加密儲存，例如創科局局長最近（11 月 18 日）在特區人大立法會會議指出，<br />\n<br />\n感染風險通知流動應用程式「安心出行」已通過獨立第三方的保安風險評估及審計和個人私隱影響評估，確保符合《個人資料（私隱）條例》規定。&hellip;. 程式採用 AES-256 加密標準保護儲存在用戶手機內的出行記錄數據。[1]<br />\n先不論局方將用 128-bit key 的 AES 加密說成 AES-256（因為這不是重點），因為只要知悉有關方法（簡單分析 JavaScript 碼使可得出），任何人若取得 LocationHistory table 中的資料，即可從紀錄中的 keyInterval 欄位，輕易透過標準的 HKDF ，取得之前加密用的 128-bit AES key ，再輕鬆用 AES-128 還原 keyData （AES 是所謂對稱密鑰演算法，加密及解密是用同一條 key）。這類保安方式，頂多稱為 security by obscurity。向公眾聲稱資料受 AES-256 加密保護，即使不是 128-bit 充 256-bit，也是極具誤導性。這類似將門鎖鎖匙藏在門前地氈底，門鎖有多堅固，也是徒然。[2]<br />\n<br />\n加密虛招何來？<br />\n<br />\n公平地說，在「安心出行」的各種限制下（不上傳資料，在用戶端背景配對確診資料，為普及及方便使用而不利用一些手機的硬件保安功能，如生物辨識，或要求每次 Check in 或配對前輸入密碼），在用戶手機內的資訊，根本難以作有效加密，因為所有解密所需的資料都在程式當中（當然從陰謀論者角度，在此機制下，政府本身亦可輕易解密）。若手機失竊，有關資料只能和很多其他私隱資料一樣，靠手機本身的保安設定保護。同樣道理，QR Code 的 hash 編碼，不論用幾多 bit ，在這情況下亦難以保證 QR Code 的真確性。<br />\n<br />\n不過，政府制訂招標要求時，往往無視上述限制，既要方便又要保安，寫入了無意義的加密要求。開發商也許明知沒有用，也要照花資源應付這種表面性的要求，只需提高標價，袋袋平安，。而這種門鎖藏在地氈底的保安虛招，竟又可通過政府創科局，以至花公帑外聘的「獨立第三方的保安風險評估及審計」，成果亦可供局長吹噓，各取所需，皆大歡喜。<br />\n<br />\n反正 False Security is Worse than No Security 這類老生常談，在講求 PR 的環境下是不太適用的。"},{"pid":"2af5aea3e209d0add9f26020cddc59ff1db7a7cf","tid":2416738,"uid":48362,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2021-02-21T09:49:31.000Z","msg":"正仆街 <img src=\"/assets/faces/dog/smile.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/dog/smile.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/dog/smile.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/dog/smile.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/dog/smile.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/dog/smile.gif\" class=\"hkgmoji\" />"},{"pid":"80e7f21563880fb0a912ac434a791bd431b2e9b2","tid":2416738,"uid":51271,"like":1,"dislike":0,"score":1,"citedBy":0,"replyTime":"2021-02-21T09:51:16.000Z","msg":"DLLM 市建局"},{"pid":"d9f30e7b8f7d208f7db8c37c8d65bd0dd76e0b40","tid":2416738,"uid":65790,"like":1,"dislike":0,"score":1,"citedBy":0,"replyTime":"2021-02-21T10:03:21.000Z","msg":"屌<br />\n仲紅撚過政府"},{"pid":"1a458956ad9b0a8186f07b1b9083421c09905cd8","tid":2416738,"uid":71092,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2021-02-21T10:17:50.000Z","msg":"<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /><img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"}]}