{"tid":133218,"cid":18,"subCid":0,"title":"Arduino Project 問題","createTime":"2017-02-24T12:16:29.000Z","updateTime":"2017-02-26T14:01:52.000Z","uid":36437,"like":2,"dislike":1,"uniUserReply":0,"replies":[{"pid":"031ceee5f25e619f63ed74e7993dd1d63b731043","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T12:16:29.000Z","msg":"有10粒LDR SENSOR<br />\n用 otsu method 搵 10粒 sensor data 最好既 threshold value<br />\n如果大過個best threshold value就1, 細過就0<br />\n有冇巴打識寫code, 我識用Otsu for 圖像,<br />\n但只係用10粒LDR就唔識<img src=\"/assets/faces/normal/banghead.gif\" class=\"hkgmoji\" /> <br />\n<br />\notsu:<br />\n<a href=\"http://www.labbookpages.co.uk/software/imgProc/otsuThreshold.html\" data-sr-url=\"https://r.lihkg.com/link?u=http%3A%2F%2Fwww.labbookpages.co.uk%2Fsoftware%2FimgProc%2FotsuThreshold.html&d=iVbTvSvdcfz%2Fe2yCQDPMV6MP9SZiTpIcsXSGftWU1%2BE%3D&h=931dd582\" target=\"_blank\">http://www.labbookpages.co.uk/software/imgProc/otsuThreshold.html</a>"},{"pid":"33e9f67f2362748fec8b5a92e090ac444892efa6","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T12:19:18.000Z","msg":"PUSH"},{"pid":"ab8d624391f7c6f602c94c7e3e5803da684f0936","tid":133218,"uid":20820,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T12:22:41.000Z","msg":"<a href=\"https://diyhacking.com/arduino-ldr-sensor/\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fdiyhacking.com%2Farduino-ldr-sensor%2F&d=iVbTvSvdcfz%2Fe2yCQDPMV6MP9SZiTpIcsXSGftWU1%2BE%3D&h=7c610110\" target=\"_blank\">https://diyhacking.com/arduino-ldr-sensor/</a><br />\n做十次，唔夠就將pin0-13轉input mode<br />\nsearch 下 pinmode同adc ,應該好多tutorial"},{"pid":"c2582737a453e0341befe664740ae3f9b9d9f2e1","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T12:41:17.000Z","msg":"<blockquote><a href=\"https://diyhacking.com/arduino-ldr-sensor/\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fdiyhacking.com%2Farduino-ldr-sensor%2F&d=iVbTvSvdcfz%2Fe2yCQDPMV6MP9SZiTpIcsXSGftWU1%2BE%3D&h=7c610110\" target=\"_blank\">https://diyhacking.com/arduino-ldr-sensor/</a><br />\n做十次，唔夠就將pin0-13轉input mode<br />\nsearch 下 pinmode同adc ,應該好多tutorial</blockquote><br />\n<br />\nNo ar brother,<br />\n個threshold value要識自己變,<br />\n用otsu method 做 Automatic threshold"},{"pid":"de1fcf0f78cb2d679627f1ebe2e91b0694105174","tid":133218,"uid":20820,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T13:12:51.000Z","msg":"<blockquote><blockquote><a href=\"https://diyhacking.com/arduino-ldr-sensor/\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fdiyhacking.com%2Farduino-ldr-sensor%2F&d=iVbTvSvdcfz%2Fe2yCQDPMV6MP9SZiTpIcsXSGftWU1%2BE%3D&h=7c610110\" target=\"_blank\">https://diyhacking.com/arduino-ldr-sensor/</a><br />\n做十次，唔夠就將pin0-13轉input mode<br />\nsearch 下 pinmode同adc ,應該好多tutorial</blockquote><br />\n<br />\nNo ar brother,<br />\n個threshold value要識自己變,<br />\n用otsu method 做 Automatic threshold</blockquote><br />\n你有冇programming底？<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /> <br />\n唔識otsu,但你研究下加減乖除應該夠做<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" />"},{"pid":"71d889c9df0f4a9dd15aa691b3384caa595461c4","tid":133218,"uid":20820,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T13:14:46.000Z","msg":"你試下formulate左otsu個算式先<br />\n諗下點表達，我睇個java code，都係用好簡單operation"},{"pid":"232e7bbbe33639360634c9fe385b29b69a4760de","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T15:07:16.000Z","msg":"<blockquote>你試下formulate左otsu個算式先<br />\n諗下點表達，我睇個java code，都係用好簡單operation</blockquote><br />\n<br />\n我知D算式啊<br />\n就係唔識轉佢做 Arduino code<br />\n因為得好basic既program底<img src=\"/assets/faces/normal/banghead.gif\" class=\"hkgmoji\" /> <br />\n<br />\n用光來做例子<br />\n個算式係threshold value 由0到1024都測試一次,<br />\n粒sensor光度細過threshold value就group落n0,<br />\n粒sensor光度大過threshold value就group落n1,<br />\nN = n0 + n1;<br />\n係我個case N係 10 因為我得10粒sensor<br />\n<br />\nw0 = n0 / N;<br />\nw1 = n1 / N;<br />\nw0+w1 = 1<br />\nw0,w1 係2個group既比例<br />\n<br />\n<br />\nu0 = 所有細過threshold value 既sensor既光度平均數<br />\nu1 = 所有細過threshold value 既sensor既光度平均數<br />\n<br />\nvar = w0w1(u0-u1)^2<br />\nvar係類間方差,當類間方差係最大,咁個threshold value就會係最好,<br />\n所以就要搵最大既var去搵個Best threshold value<br />\n<br />\n<br />\n呢個係c++ 既code, 不過佢係應用係圖像, 搵個Best threshold value,  細過個Best threshold value就黑色, 大過就白色, 令張圖變成黑白<br />\n<br />\n<a href=\"http://istoney.github.io/image%20processing/2016/08/20/otsu-binarization\" data-sr-url=\"https://r.lihkg.com/link?u=http%3A%2F%2Fistoney.github.io%2Fimage%2520processing%2F2016%2F08%2F20%2Fotsu-binarization&d=iVbTvSvdcfz%2Fe2yCQDPMV6MP9SZiTpIcsXSGftWU1%2BE%3D&h=2faccb03\" target=\"_blank\">http://istoney.github.io/image%20processing/2016/08/20/otsu-binarization</a><br />\n<br />\n如果係我個case唔係圖係sensor, d code 點改好<img src=\"/assets/faces/normal/banghead.gif\" class=\"hkgmoji\" /> <br />\n試左好多次都唔得"},{"pid":"4f63da842aa6bbcc99df365efffd870ccef2aada","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T15:11:07.000Z","msg":"<blockquote><blockquote><blockquote><a href=\"https://diyhacking.com/arduino-ldr-sensor/\" data-sr-url=\"https://r.lihkg.com/link?u=https%3A%2F%2Fdiyhacking.com%2Farduino-ldr-sensor%2F&d=iVbTvSvdcfz%2Fe2yCQDPMV6MP9SZiTpIcsXSGftWU1%2BE%3D&h=7c610110\" target=\"_blank\">https://diyhacking.com/arduino-ldr-sensor/</a><br />\n做十次，唔夠就將pin0-13轉input mode<br />\nsearch 下 <span style=\"color: red;\">pinmode同adc</span> ,應該好多tutorial</blockquote><br />\n<br />\nNo ar brother,<br />\n個threshold value要識自己變,<br />\n用otsu method 做 Automatic threshold</blockquote><br />\n你有冇programming底？<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /> <br />\n唔識otsu,但你研究下加減乖除應該夠做<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /></blockquote><br />\n<br />\n唔夠做<img src=\"/assets/faces/normal/cry.gif\" class=\"hkgmoji\" />  研究左幾日上埋外國forum問都搞唔掂<img src=\"/assets/faces/normal/banghead.gif\" class=\"hkgmoji\" /> <br />\n我用 Arduino mirco d analog pin 仲夠用"},{"pid":"5184b363d0cbac18935db24e4365f6302ea91fe3","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T15:18:28.000Z","msg":"<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" />"},{"pid":"f9acaf11aead89b46f2923be5e13652dacae72b4","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T15:54:16.000Z","msg":"<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" />"},{"pid":"7cb2f1551c6b00fd29979f16f9a1ab9398269afe","tid":133218,"uid":60967,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T16:14:43.000Z","msg":"<blockquote><blockquote>你試下formulate左otsu個算式先<br />\n諗下點表達，我睇個java code，都係用好簡單operation</blockquote><br />\n<br />\n我知D算式啊<br />\n就係唔識轉佢做 Arduino code<br />\n因為得好basic既program底<img src=\"/assets/faces/normal/banghead.gif\" class=\"hkgmoji\" /> <br />\n<br />\n用光來做例子<br />\n個算式係threshold value 由0到1024都測試一次,<br />\n粒sensor光度細過threshold value就group落n0,<br />\n粒sensor光度大過threshold value就group落n1,<br />\nN = n0 + n1;<br />\n係我個case N係 10 因為我得10粒sensor<br />\n<br />\nw0 = n0 / N;<br />\nw1 = n1 / N;<br />\nw0+w1 = 1<br />\nw0,w1 係2個group既比例<br />\n<br />\n<br />\nu0 = 所有細過threshold value 既sensor既光度平均數<br />\nu1 = 所有細過threshold value 既sensor既光度平均數<br />\n<br />\nvar = w0w1(u0-u1)^2<br />\nvar係類間方差,當類間方差係最大,咁個threshold value就會係最好,<br />\n所以就要搵最大既var去搵個Best threshold value<br />\n<br />\n<br />\n呢個係c++ 既code, 不過佢係應用係圖像, 搵個Best threshold value,  細過個Best threshold value就黑色, 大過就白色, 令張圖變成黑白<br />\n<br />\n<a href=\"http://istoney.github.io/image%20processing/2016/08/20/otsu-binarization\" data-sr-url=\"https://r.lihkg.com/link?u=http%3A%2F%2Fistoney.github.io%2Fimage%2520processing%2F2016%2F08%2F20%2Fotsu-binarization&d=iVbTvSvdcfz%2Fe2yCQDPMV6MP9SZiTpIcsXSGftWU1%2BE%3D&h=2faccb03\" target=\"_blank\">http://istoney.github.io/image%20processing/2016/08/20/otsu-binarization</a><br />\n<br />\n如果係我個case唔係圖係sensor, d code 點改好<img src=\"/assets/faces/normal/banghead.gif\" class=\"hkgmoji\" /> <br />\n試左好多次都唔得</blockquote><br />\n<br />\nImage 同 sensor raw data 做法應該冇分別，都係一粒粒pixel讀再計。你粒sensor output values 係咩format? Analog or digital?"},{"pid":"e45cdeb87682c573dae71b485ac3072775750d02","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T16:59:37.000Z","msg":"<blockquote><br />\n<br />\nImage 同 sensor raw data 做法應該冇分別，都係一粒粒pixel讀再計。你粒sensor output values 係咩format? Analog or digital?</blockquote><br />\n<br />\n咁可以點樣改佢D CODE<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <br />\n<br />\n我加 int sensor [10] = {0,1,2,3,4,5,6,7,8,9};<br />\n取代佢個 int getOtsuThreshold(int** grey, int w, int h)?<br />\n<br />\n之後<br />\n <br />\n int histogram[n];<br />\n  fill(histogram, histogram+n, 0);<br />\n  for(int i=0;i&lt;w;++i) {<br />\n    for(int j=0;j&lt;h;++j) {<br />\n     <span style=\"color: red;\"> ++histogram[grey[i][j] &amp; 0xFF];</span><br />\n<br />\n改成 ++histogram[ sensor[i] &amp; 0xFF] ?<br />\n<br />\n<br />\noutput 係digital values啊 <br />\n同普通set threshold value 一樣 output 0同1,<br />\n不過想個threshold value 識自動變"},{"pid":"98708ba327b89762db63da0fd24f3ca00fe0f666","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T17:01:16.000Z","msg":"<blockquote><blockquote><br />\n<br />\nImage 同 sensor raw data 做法應該冇分別，都係一粒粒pixel讀再計。你粒sensor output values 係咩format? Analog or digital?</blockquote><br />\n<br />\n咁可以點樣改佢D CODE<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <br />\n<br />\n我加 int sensor [10] = {0,1,2,3,4,5,6,7,8,9};<br />\n取代佢個 int getOtsuThreshold(int** grey, int w, int h)?<br />\n<br />\n之後<br />\n <br />\n int histogram[n];<br />\n  fill(histogram, histogram+n, 0);<br />\n  for(int i=0;i&lt;w;++i) {<br />\n<del>    for(int j=0;j&lt;h;++j) {</del><br />\n     <span style=\"color: red;\"> ++histogram[grey[i][j] &amp; 0xFF];</span><br />\n<br />\n改成 ++histogram[ sensor[i] &amp; 0xFF] ?<br />\n<br />\n<br />\noutput 係digital values啊 <br />\n同普通set threshold value 一樣 output 0同1,<br />\n不過想個threshold value 識自動變</blockquote>"},{"pid":"f23b78623c129c0e1bd89a6e3102915063cab20a","tid":133218,"uid":60967,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-24T19:39:58.000Z","msg":"<blockquote><blockquote><blockquote><br />\n<br />\nImage 同 sensor raw data 做法應該冇分別，都係一粒粒pixel讀再計。你粒sensor output values 係咩format? Analog or digital?</blockquote><br />\n<br />\n咁可以點樣改佢D CODE<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <br />\n<br />\n我加 int sensor [10] = {0,1,2,3,4,5,6,7,8,9};<br />\n取代佢個 int getOtsuThreshold(int** grey, int w, int h)?<br />\n<br />\n之後<br />\n <br />\n int histogram[n];<br />\n  fill(histogram, histogram+n, 0);<br />\n  for(int i=0;i&lt;w;++i) {<br />\n<del>    for(int j=0;j&lt;h;++j) {</del><br />\n     <span style=\"color: red;\"> ++histogram[grey[i][j] &amp; 0xFF];</span><br />\n<br />\n改成 ++histogram[ sensor[i] &amp; 0xFF] ?<br />\n<br />\n<br />\noutput 係digital values啊 <br />\n同普通set threshold value 一樣 output 0同1,<br />\n不過想個threshold value 識自動變</blockquote></blockquote><br />\n<br />\n其實你唔洗改佢個code,佢個code寫左個function 去計，而你只需要放合適既data入呢個function 去計<br />\n個function 需要2D vector and the width and height of your vector<br />\n你可以整一個2x5 vector so height = 2, width = 5<br />\n之後將你sensor 既data 放入去<br />\n最後call個function, 個return value就係你要既threshold"},{"pid":"645088672a60d0cb41c105006bb8046a1f0bc5a5","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-25T11:51:32.000Z","msg":"<blockquote><blockquote><blockquote><blockquote><br />\n<br />\nImage 同 sensor raw data 做法應該冇分別，都係一粒粒pixel讀再計。你粒sensor output values 係咩format? Analog or digital?</blockquote><br />\n<br />\n咁可以點樣改佢D CODE<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <br />\n<br />\n我加 int sensor [10] = {0,1,2,3,4,5,6,7,8,9};<br />\n取代佢個 int getOtsuThreshold(int** grey, int w, int h)?<br />\n<br />\n之後<br />\n <br />\n int histogram[n];<br />\n  fill(histogram, histogram+n, 0);<br />\n  for(int i=0;i&lt;w;++i) {<br />\n<del>    for(int j=0;j&lt;h;++j) {</del><br />\n     <span style=\"color: red;\"> ++histogram[grey[i][j] &amp; 0xFF];</span><br />\n<br />\n改成 ++histogram[ sensor[i] &amp; 0xFF] ?<br />\n<br />\n<br />\noutput 係digital values啊 <br />\n同普通set threshold value 一樣 output 0同1,<br />\n不過想個threshold value 識自動變</blockquote></blockquote><br />\n<br />\n其實你唔洗改佢個code,佢個code寫左個function 去計，而你只需要放合適既data入呢個function 去計<br />\n個function 需要2D vector and the width and height of your vector<br />\n你可以整一個2x5 vector so height = 2, width = 5<br />\n之後將你sensor 既data 放入去<br />\n最後call個function, 個return value就係你要既threshold</blockquote><br />\n<br />\n但係我用arduino係邊到加個analogread 去讀d sensor<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" />"},{"pid":"77efef811b96479c2b0be7cb2f9698c764e4739e","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-25T11:51:47.000Z","msg":"<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" />"},{"pid":"86db8cecd8a5c7e6d727983013c2fc20451eb8bf","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-25T14:26:31.000Z","msg":"<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" />"},{"pid":"ebdaf8402fd85741eaf3ca20db3fefb4cd374060","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-25T15:09:53.000Z","msg":"<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" />"},{"pid":"6f937d535d2b7f19244ac6a9a68c53e8a04ccc61","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-25T15:10:18.000Z","msg":"<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <img src=\"/assets/faces/normal/bouncer.gif\" class=\"hkgmoji\" />"},{"pid":"ee291f7157d910a35aee9360c5f9426b04eadb3d","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-25T17:23:56.000Z","msg":"<img src=\"/assets/faces/normal/cry.gif\" class=\"hkgmoji\" />"},{"pid":"2387f4429ff8f81a66b8c934415fd8d684e57aa8","tid":133218,"uid":60967,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-25T17:29:38.000Z","msg":"<blockquote><blockquote><blockquote><blockquote><blockquote><br />\n<br />\nImage 同 sensor raw data 做法應該冇分別，都係一粒粒pixel讀再計。你粒sensor output values 係咩format? Analog or digital?</blockquote><br />\n<br />\n咁可以點樣改佢D CODE<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <br />\n<br />\n我加 int sensor [10] = {0,1,2,3,4,5,6,7,8,9};<br />\n取代佢個 int getOtsuThreshold(int** grey, int w, int h)?<br />\n<br />\n之後<br />\n <br />\n int histogram[n];<br />\n  fill(histogram, histogram+n, 0);<br />\n  for(int i=0;i&lt;w;++i) {<br />\n<del>    for(int j=0;j&lt;h;++j) {</del><br />\n     <span style=\"color: red;\"> ++histogram[grey[i][j] &amp; 0xFF];</span><br />\n<br />\n改成 ++histogram[ sensor[i] &amp; 0xFF] ?<br />\n<br />\n<br />\noutput 係digital values啊 <br />\n同普通set threshold value 一樣 output 0同1,<br />\n不過想個threshold value 識自動變</blockquote></blockquote><br />\n<br />\n其實你唔洗改佢個code,佢個code寫左個function 去計，而你只需要放合適既data入呢個function 去計<br />\n個function 需要2D vector and the width and height of your vector<br />\n你可以整一個2x5 vector so height = 2, width = 5<br />\n之後將你sensor 既data 放入去<br />\n最後call個function, 個return value就係你要既threshold</blockquote><br />\n<br />\n但係我用arduino係邊到加個analogread 去讀d sensor<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /></blockquote><br />\n<br />\n整一個loop每隔一段時間run一次<br />\n係個loop入面先用analogread 將所有sensor讀一次，之後call上面個function,將function 既return value save低"},{"pid":"752c18a98f35c58b4104e67f28d23c03313b7959","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-25T20:21:55.000Z","msg":"<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><br />\n<br />\nImage 同 sensor raw data 做法應該冇分別，都係一粒粒pixel讀再計。你粒sensor output values 係咩format? Analog or digital?</blockquote><br />\n<br />\n咁可以點樣改佢D CODE<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <br />\n<br />\n我加 int sensor [10] = {0,1,2,3,4,5,6,7,8,9};<br />\n取代佢個 int getOtsuThreshold(int** grey, int w, int h)?<br />\n<br />\n之後<br />\n <br />\n int histogram[n];<br />\n  fill(histogram, histogram+n, 0);<br />\n  for(int i=0;i&lt;w;++i) {<br />\n<del>    for(int j=0;j&lt;h;++j) {</del><br />\n     <span style=\"color: red;\"> ++histogram[grey[i][j] &amp; 0xFF];</span><br />\n<br />\n改成 ++histogram[ sensor[i] &amp; 0xFF] ?<br />\n<br />\n<br />\noutput 係digital values啊 <br />\n同普通set threshold value 一樣 output 0同1,<br />\n不過想個threshold value 識自動變</blockquote></blockquote><br />\n<br />\n其實你唔洗改佢個code,佢個code寫左個function 去計，而你只需要放合適既data入呢個function 去計<br />\n個function 需要2D vector and the width and height of your vector<br />\n你可以整一個2x5 vector so height = 2, width = 5<br />\n之後將你sensor 既data 放入去<br />\n最後call個function, 個return value就係你要既threshold</blockquote><br />\n<br />\n但係我用arduino係邊到加個analogread 去讀d sensor<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /></blockquote><br />\n<br />\n整一個loop每隔一段時間run一次<br />\n係個loop入面先用analogread 將所有sensor讀一次，之後call上面個function,將function 既return value save低</blockquote><br />\n<br />\n巴打我唔識寫D CODE<img src=\"/assets/faces/normal/frown.gif\" class=\"hkgmoji\" />"},{"pid":"78871dc3d3867af14c62c794e21fafd934bae868","tid":133218,"uid":36437,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-25T22:32:33.000Z","msg":"int c = img.cols; //圖像列數<br />\n&nbsp;&nbsp;&nbsp;&nbsp;int r = img.rows; //圖像行數<br />\n&nbsp;&nbsp;&nbsp;&nbsp;int T = 0; //閾值<br />\n    uchar* data = img.data; //數據指針<br />\n&nbsp;&nbsp;&nbsp;&nbsp;int ftNum = 0; //前景像素個數<br />\n&nbsp;&nbsp;&nbsp;&nbsp;int bgNum = 0; //背景像素個數<br />\n&nbsp;&nbsp;&nbsp;&nbsp;int N = c*r; //總像素個數<br />\n&nbsp;&nbsp;&nbsp;&nbsp;int ftSum = 0; //前景總灰度值<br />\n&nbsp;&nbsp;&nbsp;&nbsp;int bgSum = 0; //背景總灰度值<br />\n&nbsp;&nbsp;&nbsp;&nbsp;int graySum = 0;<br />\n&nbsp;&nbsp;&nbsp;&nbsp;double w0 = 0; //前景像素個數佔比<br />\n&nbsp;&nbsp;&nbsp;&nbsp;double w1 = 0; //背景像素個數佔比<br />\n&nbsp;&nbsp;&nbsp;&nbsp;double u0 = 0; //前景平均灰度<br />\n&nbsp;&nbsp;&nbsp;&nbsp;double u1 = 0; //背景平均灰度<br />\n&nbsp;&nbsp;&nbsp;&nbsp;double Histogram[256] = {0}; //灰度直方圖<br />\n&nbsp;&nbsp;&nbsp;&nbsp;double temp = 0; //臨時類間方差<br />\n&nbsp;&nbsp;&nbsp;&nbsp;double g = 0; //類間方差<br />\n<br />\n<br />\n<br />\n<br />\n<br />\nvoid setup() {<br />\n&nbsp;&nbsp;// put your setup code here, to run once:<br />\n<br />\n}<br />\n<br />\nvoid loop() {<br />\n&nbsp;&nbsp;&nbsp;//灰度直方圖<br />\n&nbsp;&nbsp;&nbsp;&nbsp;for(int i = 0; i &lt; r ; i ++) {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int j = 0; j &lt;c; j ++) {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Histogram[img.at&lt;uchar&gt;(i,j)]++;<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />\n&nbsp;&nbsp;&nbsp;&nbsp;}<br />\n&nbsp;&nbsp;&nbsp;&nbsp;//求總灰度值<br />\n&nbsp;&nbsp;&nbsp;&nbsp;for(int i = 0; i &lt; 256; i ++) {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;graySum += Histogram[i]*i;<br />\n&nbsp;&nbsp;&nbsp;&nbsp;}<br />\n<br />\n&nbsp;&nbsp;&nbsp;&nbsp;for(int i = 0; i &lt; 256; i ++) {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ftNum += Histogram[i]; //閾值為i時前景個數<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bgNum = N - ftNum; //閾值為i時背景個數<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;w0 = (double)ftNum/N; //前景像素佔總數比<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;w1 = (double)b​​gNum/N; //背景像素佔總數比<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(ftNum == 0) continue;<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(bgNum == 0) break;<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//前景平均灰度<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ftSum += i*Histogram[i];<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u0 = ftSum/ftNum;<br />\n<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//背景平均灰度<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bgSum = graySum - ftSum;<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u1 = bgSum/bgNum;<br />\n<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g = w0*w1*(u0-u1)*(u0-u1);<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(g &gt; temp) {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temp = g;<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T = i;<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />\n&nbsp;&nbsp;&nbsp;&nbsp;}<br />\n<br />\n&nbsp;&nbsp;&nbsp;&nbsp;for(int i=0; i&lt;img.rows; i++)<br />\n&nbsp;&nbsp;&nbsp;&nbsp;{<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int j=0; j&lt;img.cols; j++)<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if((int)img.at&lt;uchar&gt;(i,j)&gt;T)<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.at&lt;uchar&gt;(i,j) = 255;<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.at&lt;uchar&gt;(i,j) = 0;<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />\n&nbsp;&nbsp;&nbsp;&nbsp;}<br />\n&nbsp;&nbsp;&nbsp;&nbsp;return img;<br />\n}<br />\n<br />\n}<br />\n<br />\n<br />\n巴打我呢支段CODE求改<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <br />\n個input用 Sensor既 analogRead <img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" />"},{"pid":"fc1990e48bf06a6a02449e73f0ae3e9c1e8c509c","tid":133218,"uid":60967,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-26T08:30:52.000Z","msg":"<blockquote>int c = img.cols; //圖像列數<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int r = img.rows; //圖像行數<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int T = 0; //閾值<br />\n    uchar* data = img.data; //數據指針<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int ftNum = 0; //前景像素個數<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int bgNum = 0; //背景像素個數<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int N = c*r; //總像素個數<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int ftSum = 0; //前景總灰度值<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int bgSum = 0; //背景總灰度值<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int graySum = 0;<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;double w0 = 0; //前景像素個數佔比<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;double w1 = 0; //背景像素個數佔比<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;double u0 = 0; //前景平均灰度<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;double u1 = 0; //背景平均灰度<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;double Histogram[256] = {0}; //灰度直方圖<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;double temp = 0; //臨時類間方差<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;double g = 0; //類間方差<br />\n<br />\n<br />\n<br />\n<br />\n<br />\nvoid setup() {<br />\n&amp;nbsp;&amp;nbsp;// put your setup code here, to run once:<br />\n<br />\n}<br />\n<br />\nvoid loop() {<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;//灰度直方圖<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(int i = 0; i &lt; r ; i ++) {<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(int j = 0; j &lt;c; j ++) {<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;  Histogram[img.at&lt;uchar&gt;(i,j)]++;<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//求總灰度值<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(int i = 0; i &lt; 256; i ++) {<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;graySum += Histogram[i]*i;<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}<br />\n<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(int i = 0; i &lt; 256; i ++) {<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ftNum += Histogram[i]; //閾值為i時前景個數<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;bgNum = N - ftNum; //閾值為i時背景個數<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;w0 = (double)ftNum/N; //前景像素佔總數比<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;w1 = (double)b​​gNum/N; //背景像素佔總數比<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(ftNum == 0) continue;<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(bgNum == 0) break;<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//前景平均灰度<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ftSum += i*Histogram[i];<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;u0 = ftSum/ftNum;<br />\n<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//背景平均灰度<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;bgSum = graySum - ftSum;<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;u1 = bgSum/bgNum;<br />\n<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;g = w0*w1*(u0-u1)*(u0-u1);<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(g &gt; temp) {<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;temp = g;<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T = i;<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}<br />\n<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(int i=0; i&lt;img.rows; i++)<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(int j=0; j&lt;img.cols; j++)<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if((int)img.at&lt;uchar&gt;(i,j)&gt;T)<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;img.at&lt;uchar&gt;(i,j) = 255;<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;img.at&lt;uchar&gt;(i,j) = 0;<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}<br />\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return img;<br />\n}<br />\n<br />\n}<br />\n<br />\n<br />\n巴打我呢支段CODE求改<img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /> <br />\n個input用 Sensor既 analogRead <img src=\"/assets/faces/normal/adore.gif\" class=\"hkgmoji\" /></blockquote><br />\n<br />\n巴打,我睇過你既code,其實都幾多問題<img src=\"/assets/faces/normal/sosad.gif\" class=\"hkgmoji\" /> <br />\n加上我都好耐冇寫C,要慢慢查reference, 要到我真係好得閒先幫到你<img src=\"/assets/faces/normal/angel.gif\" class=\"hkgmoji\" />"},{"pid":"5603c4282e99f970451603b8e0fa352c21c97dc8","tid":133218,"uid":15501,"like":0,"dislike":0,"score":0,"citedBy":0,"replyTime":"2017-02-26T11:57:38.000Z","msg":"其實邊到有班可以學寫呢d code"}]}